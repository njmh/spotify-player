(this["webpackJsonpspotify-player"]=this["webpackJsonpspotify-player"]||[]).push([[0],{144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Spotify Player",a=e?"".concat(e," - ").concat(t):t;document.title=a}var u=a(2),s=a.n(u),l=a(14),p=a(4),f=a(25),d=a.n(f),m=a(19);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=new URLSearchParams(e),a={};return t.forEach((function(e,t){a[t]=e})),a}var h={accessToken:void 0,expiresAt:void 0,refreshToken:void 0};function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&"),n="https://chameleon-spotify-auth.herokuapp.com/".concat(e,"?").concat(a);return n}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage;t.setItem("spotify-auth",JSON.stringify(e))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage,t=e.getItem("spotify-auth");return t?JSON.parse(t):null}function k(e){if(!e)return!1;var t=e.expiresAt;return!!t&&Date.now()>t-6e3}function w(e){e||(e=b("login",{returnUrl:window.location.href})),window.location.href=e}function x(e,t){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(s.a.mark((function e(t,a){var n,r,i,c,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",h);case 2:return a||(a=b("refresh",{refresh_token:t})),e.prev=3,e.next=6,d.a.get(a);case 6:return n=e.sent,r=n.data,i=r.access_token,c=r.expires_in,o=Date.now()+1e3*Number(c),g(u={accessToken:i,expiresAt:o,refreshToken:t}),m.a.invalidateQueries("currentUser"),e.abrupt("return",u);case 15:return e.prev=15,e.t0=e.catch(3),e.abrupt("return",h);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function O(){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=y())||w(),!k(t)){e.next=6;break}return e.next=5,x(null===(a=t)||void 0===a?void 0:a.refreshToken);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=v(e),a=t.access_token,n=t.expires_in,r=t.refresh_token;if(!a)return null;var i=Date.now()+1e3*Number(n),c={accessToken:a,refreshToken:r,expiresAt:i};return c}();e&&(g(e),window.location.href="".concat(window.location.origin).concat(window.location.pathname));var t=y();t?k(t)?(r(!1),Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.refreshToken);case 2:r(!0);case 3:case"end":return e.stop()}}),e)})))()):r(!0):w()}),[]),a}var P,C,S,z,I,T,F,B=a(165);!function(e){e[e.PausePlayback=0]="PausePlayback",e[e.ResumePlayback=1]="ResumePlayback",e[e.SkipNext=2]="SkipNext",e[e.SkipPrevious=3]="SkipPrevious",e[e.ShuffleOn=4]="ShuffleOn",e[e.ShuffleOff=5]="ShuffleOff",e[e.RepeatOnContext=6]="RepeatOnContext",e[e.RepeatOnTrack=7]="RepeatOnTrack",e[e.RepeatOff=8]="RepeatOff"}(P||(P={})),function(e){e.Playing="playing",e.Paused="paused",e.InActive="inactive"}(C||(C={})),function(e){e.On="on",e.Off="off"}(S||(S={})),function(e){e.Off="off",e.Context="context",e.Track="track"}(z||(z={})),function(e){e.Track="track",e.Episode="episode"}(I||(I={})),function(e){e.Forward="forward",e.Back="back"}(T||(T={})),function(e){e.Playlist="playlist",e.Album="album",e.Show="show"}(F||(F={}));var R={get:function(e){return new Promise(function(){var t=Object(p.a)(s.a.mark((function t(a,n){var r,i,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={},t.next=4,O();case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:if(i=t.t0,c=i.accessToken){t.next=11;break}return t.abrupt("return",n("Spotify not authenticated"));case 11:return r.headers={Authorization:"Bearer ".concat(c)},t.next=14,d.a.get(e,r);case 14:return o=t.sent,t.abrupt("return",a(o));case 18:return t.prev=18,t.t1=t.catch(0),t.t1,t.abrupt("return",n(t.t1));case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,a){return t.apply(this,arguments)}}())},post:function(e,t){return new Promise(function(){var a=Object(p.a)(s.a.mark((function a(n,r){var i,c,o,u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={},a.next=4,O();case 4:if(a.t0=a.sent,a.t0){a.next=7;break}a.t0={};case 7:if(c=a.t0,o=c.accessToken){a.next=11;break}return a.abrupt("return",r("Spotify not authenticated"));case 11:return i.headers={Authorization:"Bearer ".concat(o)},a.next=14,d.a.post(e,t,i);case 14:return u=a.sent,a.abrupt("return",n(u.data));case 18:return a.prev=18,a.t1=a.catch(0),a.t1,a.abrupt("return",r(a.t1));case 22:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(e,t){return a.apply(this,arguments)}}())},put:function(e,t){return new Promise(function(){var a=Object(p.a)(s.a.mark((function a(n,r){var i,c,o,u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={},a.next=4,O();case 4:if(a.t0=a.sent,a.t0){a.next=7;break}a.t0={};case 7:if(c=a.t0,o=c.accessToken){a.next=11;break}return a.abrupt("return",r("Spotify not authenticated"));case 11:return i.headers={Authorization:"Bearer ".concat(o)},a.next=14,d.a.put(e,t,i);case 14:return u=a.sent,a.abrupt("return",n(u.data));case 18:return a.prev=18,a.t1=a.catch(0),a.t1,a.abrupt("return",r(a.t1));case 22:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(e,t){return a.apply(this,arguments)}}())}};function A(){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("https://api.spotify.com/v1/me/player?additional_types=track,episode");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=a(12),W=a.n(L);function U(e){return e.map((function(e){return{uri:e.uri,href:e.href,name:e.name}}))}var D=a(18);function M(e){return e.map((function(e){return Object(D.a)({},e)}))}function J(e){var t=W()(e,"currently_playing_type",null),a=function(e,t){var a,n=W()(e,"is_playing",null),r=W()(e,"progress_ms",0),i=W()(e,"item.duration_ms",0),c=i-r,o=W()(e,"shuffle_state",!1),u=W()(e,"repeat_state",!1),s=(a=W()(e,"device",null))?{id:a.id,name:a.name,type:a.type,active:a.is_active,volume:a.volume_percent}:null,l=C.InActive;return null!==n&&(l=n?C.Playing:C.Paused),{state:l,shuffle:o?S.On:S.Off,current:Math.round(r/1e3),duration:Math.round(i/1e3),remaining:Math.round(c/1e3),type:t,repeat:u,device:s}}(e,t),n=null,r=null;t===I.Track&&(r=function(e){if(!e)return null;var t=e.uri,a=e.href,n=e.name,r=U(e.artists);return{uri:t,href:a,name:n,artist:r.map((function(e){return e.name})).join(", "),artists:r,image:M(e.images)[0]}}(W()(e,"item.album")),n=function(e,t){if(!e)return null;var a=e.uri,n=e.href,r=e.name,i=e.track_number,c=e.duration_ms,o=U(e.artists);return{uri:a,href:n,name:r,artist:o.map((function(e){return e.name})).join(", "),artists:o,trackNumber:i,duration:c,album:t||""}}(W()(e,"item"),r&&r.name));var i,c,o=null,u=null;return t===I.Episode&&(u=(i=W()(e,"item.show"))?{uri:i.uri,href:i.href,name:i.name,description:i.description,publisher:i.publisher,image:M(i.images)[0]}:null,o=function(e,t){return e?{uri:e.uri,href:e.href,name:e.name,description:e.description,duration:e.duration_ms,show:t||""}:null}(W()(e,"item"),u&&u.name)),{type:t,playback:a,track:n,album:r,episode:o,show:u,context:(c=W()(e,"context"))?{uri:c.uri,href:c.href,type:c.type}:null}}var H=a(5),Z=Object(B.a)({root:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif;',fontSize:function(e){return e.fontSize},fontWeight:function(e){return e.fontWeight},lineHeight:1.235,letterSpacing:"0.00735em"}});var $=function(e){var t,a=e.children,n=e.className,i=e.scaled,c=e.size,o=e.weight,u=void 0===o?"regular":o,s=e.component,l=void 0===s?"span":s,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=16;if(e=e||a,t){var n="vw"===t?1024:768;return"".concat(e/n*100).concat(t)}return"".concat(e/a,"rem")}(c,i);switch(u){case"light":t=300;break;case"regular":default:t=400;break;case"medium":t=500;break;case"bold":t=700}var f=Z({fontSize:p,fontWeight:t}),d=l;return r.a.createElement(d,{className:Object(H.a)(f.root,n&&n)},a)},Q=a(70),Y=a(170),q=Object(B.a)({paper:{backgroundColor:function(e){return"rgba(0, 0, 0, ".concat(e.paperOpacity,")")},color:"#fff",boxShadow:"none",border:"none",transition:"0.8s transform cubic-bezier(.25, .25, 0, 1) !important",overflowY:"visible"},drawerInner:{display:"flex",alignItems:"center",height:80}}),G=function(e){var t=e.paperOpacity,a=void 0===t?1:t,n=Object(Q.a)(e,["paperOpacity"]),i=q({paperOpacity:a});return r.a.createElement(Y.a,Object.assign({},n,{variant:"persistent",classes:{paper:i.paper},ModalProps:{hideBackdrop:!0},transitionDuration:800}),r.a.createElement("div",{className:i.drawerInner},e.children))},K=Object(B.a)({root:{position:"absolute",zIndex:999},left:{marginRight:"auto"},right:{marginLeft:"auto"},logo:{position:"absolute",top:20,left:"calc(50% - 20px)",width:40,height:40,margin:"0 auto","& svg":{width:40,height:40}}}),V=function(e){var t=e.left,a=e.right,n=e.logo,i=K();return r.a.createElement("div",{className:i.root},r.a.createElement(G,{anchor:"top",open:!0,paperOpacity:.99},t&&r.a.createElement("div",{className:i.left},t),n&&r.a.createElement("div",{className:i.logo},n),a&&r.a.createElement("div",{className:i.right},a)))},X=function(){return r.a.createElement("svg",{viewBox:"0 0 512 512"},r.a.createElement("circle",{style:{fill:"#50B95D"},cx:"256",cy:"256",r:"256"}),r.a.createElement("path",{style:{fill:"#20A83E"},d:"M34.133,256c0-135.648,105.508-246.636,238.933-255.42C267.424,0.208,261.737,0,256,0 C114.615,0,0,114.615,0,256s114.615,256,256,256c5.737,0,11.424-0.208,17.067-0.58C139.642,502.636,34.133,391.648,34.133,256z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M358.23,335.212L358.23,335.212c-48.438-21.419-100.06-32.278-153.43-32.278 c-31.435,0-62.695,3.854-92.913,11.454c-11.408,2.869-18.355,14.485-15.485,25.893c2.869,11.406,14.483,18.353,25.893,15.485 c26.816-6.746,54.575-10.165,82.506-10.165c47.392,0,93.207,9.634,136.176,28.635c8.213,3.631,18.391,1.478,24.423-5.178 c5.613-6.194,6.945-15.57,3.569-23.173C366.867,341.153,362.961,337.303,358.23,335.212z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M386.652,259.147c-57.538-24.737-118.722-37.28-181.852-37.28c-31.25,0-62.486,3.15-92.839,9.361 c-13.662,2.796-22.749,16.529-19.949,30.212c2.829,13.822,16.377,22.777,30.212,19.948c26.986-5.521,54.768-8.321,82.576-8.321 c56.134,0,110.515,11.142,161.63,33.118c9.554,4.107,21.119,1.799,28.405-5.61c7.328-7.452,9.173-19.09,4.917-28.574 C397.177,266.262,392.429,261.631,386.652,259.147z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M444.853,196.524c-2.849-7.452-8.429-13.348-15.712-16.603 C358.38,148.3,282.901,132.267,204.8,132.267c-36.37,0-72.745,3.573-108.113,10.621c-11.318,2.255-20.645,11.296-23.27,22.532 c-2.902,12.42,2.736,25.532,13.526,32.211c6.365,3.94,14.074,5.305,21.417,3.838C139.894,195.186,172.341,192,204.8,192 c69.648,0,136.928,14.285,199.971,42.457c8.618,3.852,18.891,3.334,27.07-1.381c7.268-4.191,12.572-11.468,14.337-19.669 C447.383,207.802,446.899,201.874,444.853,196.524z"}))},ee=a(171);function te(){return(te=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("https://api.spotify.com/v1/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return function(e){if(!e)return null;var t=e.uri,a=e.href,n=e.display_name,r=M(e.images),i=n?n.split(" ").map((function(e){return e[0]})).join("").toUpperCase():"";return{uri:t,href:a,displayName:n,initials:i,image:r[0]}}(Object(m.b)("currentUser",(function(){return function(){return te.apply(this,arguments)}()})).data)}var ne=Object(B.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(2)},name:{marginRight:e.spacing(2)}}})),re=function(){var e=ne(),t=ae();if(!t)return null;var a=t.displayName,n=t.initials,i=t.image;return r.a.createElement("div",{className:e.root},r.a.createElement($,{size:16,component:"div",className:e.name},a),r.a.createElement(ee.a,{alt:a,src:i.url},n))};function ie(){return(ie=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(p.a)(s.a.mark((function e(a,n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(r=document.createElement("div")).setAttribute("style","\n        position: absolute;\n        width: 0;\n        height: 0;\n        overflow: hidden;\n        background-color: red;\n      "),(i=document.createElement("img")).setAttribute("src",t),i.addEventListener("load",(function(e){var t={loaded:!0,width:i.clientWidth,height:i.clientHeight};r.parentElement.removeChild(r),a(t)})),r.appendChild(i),document.body.appendChild(r)}catch(c){n(c)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=Object(B.a)({root:{width:function(e){return e.width?e.width:"100%"},height:function(e){return e.height?e.height:"100%"},backgroundColor:function(e){return e.backgroundColor?e.backgroundColor:"transparent"},transition:function(e){return"".concat(e.duration,"ms background-color ease")}},image:{width:"100%",height:"100%",backgroundImage:function(e){return e.backgroundImage?e.backgroundImage:"none"},backgroundRepeat:function(e){return e.backgroundRepeat?e.backgroundRepeat:"no-repeat"},backgroundPosition:function(e){return e.backgroundPosition?e.backgroundPosition:"center center"},backgroundSize:function(e){return e.backgroundSize?e.backgroundSize:"cover"},transition:function(e){return"".concat(e.duration,"ms background-image ease, ").concat(e.duration,"ms opacity ease")}}}),oe=function(e){var t=e.imageUrl,a=e.duration,i=void 0===a?1e3:a,c=e.className,o=ce(Object(D.a)(Object(D.a)({},e),{},{duration:i})),u=Object(n.useState)(!1),s=Object(l.a)(u,2),p=s[0],f=s[1],d=Object(n.useState)(""),m=Object(l.a)(d,2),v=m[0],h=m[1];Object(n.useEffect)((function(){v===t&&p||(""!==t?function(e){return ie.apply(this,arguments)}(t).then((function(e){!function(e){h(e),f(!0)}(t)})):(f(!1),setTimeout((function(){return h("none")}),i)))}),[t,p,v,i]);var b=p?1:0,g=v?"url(".concat(v,")"):e.backgroundImage?"url(".concat(e.backgroundImage):"none";return r.a.createElement("div",{className:Object(H.a)(o.root,c&&c)},r.a.createElement("div",{className:o.image,style:{backgroundImage:g,opacity:b}}))},ue=Object(B.a)({fill:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},root:{zIndex:0,userSelect:"none",overflow:"hidden"},overlay:{backdropFilter:"blur(20px)",backgroundColor:"rgba(0, 0, 0, 0.33)",zIndex:2},image:{zIndex:1,transform:"scale(1.2)",transition:"1.25s transform cubic-bezier(.25, .25, 0, 1)"}}),se=function(e){var t=e.item,a=ue({});return r.a.createElement("div",{className:Object(H.a)(a.root,a.fill)},r.a.createElement("div",{className:Object(H.a)(a.overlay,a.fill)}),r.a.createElement("div",{className:Object(H.a)(a.image,a.fill)},r.a.createElement(oe,{imageUrl:t?t.image.url:"",backgroundColor:"#000"})))};function le(e){switch(e){case"small":return 20;case"medium":default:return 40;case"large":return 50;case"x-large":return 80}}var pe=Object(B.a)({root:{width:"100%",display:"flex",alignItems:"center",justifyContent:function(e){return e.align?function(e){switch(e){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}}(e.align):"center"}},button:{position:"relative",width:function(e){return e.size?le(e.size):40},height:function(e){return e.size?le(e.size):40},marginLeft:20,marginRight:20,padding:0,appearance:"none",background:"none",border:"none",cursor:"pointer","&:active, &:focus":{outline:0}},icon:{"& > svg":{position:"absolute",top:0,left:0,width:function(e){return e.size?le(e.size):40},height:function(e){return e.size?le(e.size):40},"& path":{fill:function(e){return e.active?"#50B95D":"#fff"},transition:"0.3s fill ease"}}}}),fe=function(e){var t=e.children,a=e.size,n=e.active,i=e.onClick,c=pe({size:a,active:n});return r.a.createElement("button",{className:c.button,onClick:i||void 0},r.a.createElement("div",{className:c.icon},t))},de=function(e){var t=e.align,a=pe({align:void 0===t?"center":t});return r.a.createElement("div",{className:a.root},e.children)};function me(){return(me=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put("https://api.spotify.com/v1/me/player/play",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put("https://api.spotify.com/v1/me/player/pause",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=a(63),be=a.n(he),ge=a(62),ye=a.n(ge),ke=function(e){var t=e.playbackState;return r.a.createElement(fe,{size:"x-large",onClick:function(){t===C.Paused&&function(){me.apply(this,arguments)}(),t===C.Playing&&function(){ve.apply(this,arguments)}()}},t===C.Playing&&r.a.createElement(ye.a,null),t===C.Paused&&r.a.createElement(be.a,null))};function we(){return(we=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("https://api.spotify.com/v1/me/player/next",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("https://api.spotify.com/v1/me/player/previous",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(p.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put("https://api.spotify.com/v1/me/player/seek?position_ms=".concat(t),{});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=a(64),Ne=a.n(je),Pe=a(66),Ce=a.n(Pe),Se=a(65),ze=a.n(Se),Ie=a(67),Te=a.n(Ie),Fe=function(e){var t=e.playback,a=e.direction,n=t.type;return r.a.createElement(fe,{size:"large",onClick:function(){if(n===I.Track&&(a===T.Forward&&function(){we.apply(this,arguments)}(),a===T.Back&&function(){xe.apply(this,arguments)}()),n===I.Episode){if(a===T.Forward)Ee(1e3*(t.current+30));if(a===T.Back)Ee(1e3*(t.current-30))}}},a===T.Back&&r.a.createElement(r.a.Fragment,null,n===I.Track&&r.a.createElement(Ne.a,null),n===I.Episode&&r.a.createElement(ze.a,null)),a===T.Forward&&r.a.createElement(r.a.Fragment,null,n===I.Track&&r.a.createElement(Ce.a,null),n===I.Episode&&r.a.createElement(Te.a,null)))};function Be(){return(Be=Object(p.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put("https://api.spotify.com/v1/me/player/shuffle?state=".concat(String(t)),{});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=a(68),Ae=a.n(Re),_e=function(e){var t=e.shuffleState;return r.a.createElement(fe,{active:t===S.On,onClick:function(){!function(e){Be.apply(this,arguments)}(!(t===S.On))}},r.a.createElement(Ae.a,null))};function Le(){return(Le=Object(p.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.put("https://api.spotify.com/v1/me/player/repeat?state=".concat(t),{});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var We=a(43),Ue=a.n(We),De=a(69),Me=a.n(De),Je=function(e){var t=e.repeatState,a=t!==z.Off;return r.a.createElement(fe,{active:a,onClick:function(){var e;switch(t){default:case z.Off:e=z.Context;break;case z.Context:e=z.Track;break;case z.Track:e=z.Off}!function(e){Le.apply(this,arguments)}(e)}},t===z.Off&&r.a.createElement(Ue.a,null),t===z.Context&&r.a.createElement(Ue.a,null),t===z.Track&&r.a.createElement(Me.a,null))},He=Object(B.a)({playbackControls:{width:"100%",height:80}}),Ze=function(e){var t=He(),a=e.playback;return r.a.createElement("div",{className:t.playbackControls},r.a.createElement(de,null,a.type===I.Track&&r.a.createElement(_e,{shuffleState:a.shuffle}),r.a.createElement(Fe,{playback:a,direction:T.Back}),r.a.createElement(ke,{playbackState:a.state}),r.a.createElement(Fe,{playback:a,direction:T.Forward}),a.type===I.Track&&r.a.createElement(Je,{repeatState:a.repeat})))},$e=a(11),Qe=a(168),Ye=a(169);function qe(e){var t=Math.floor(e/60),a=e-60*t;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))}var Ge=Object(B.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",height:80,textAlign:"right",paddingRight:16,userSelect:"none"},playbackProgressCurrent:{fontWeight:500},playbackProgressPaused:{display:"inline-block",opacity:function(e){return e.playbackState&&e.playbackState===C.Paused?.5:0},marginRight:10,transition:"0.3s opacity ease"},playbackProgressTotal:{opacity:.5},playbackProgressBar:{position:"absolute",top:-4,left:0,width:"100%",height:4}}),Ke=Object($e.a)({root:{height:4,backgroundColor:"rgba(255, 255, 255, 0.15)"},bar:{backgroundColor:"#fff",transition:"transform 0s linear"}})(Qe.a),Ve=function(e){var t=e.playback,a=Ge({playbackState:t.state}),n=t.duration,i=t.current,c=t.remaining,o=i/n*100;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke,{className:a.playbackProgressBar,variant:"determinate",value:o}),r.a.createElement("div",{className:a.root},r.a.createElement(Ye.a,{variant:"h5",component:"div",className:a.playbackProgressCurrent},r.a.createElement("span",{className:a.playbackProgressPaused},"Paused"),qe(i)),r.a.createElement(Ye.a,{variant:"subtitle1",component:"div",className:a.playbackProgressTotal},"-",qe(c)," / ",qe(n))))},Xe=Object(B.a)({root:{position:"absolute",zIndex:999},playbackControls:{width:"58.59375vh",marginLeft:50},playbackProgress:{marginLeft:"auto"}}),et=function(e){var t=e.playback,a=Xe();if(!t)return null;var n=t.state===C.Playing||t.state===C.Paused;return r.a.createElement("div",{className:a.root},r.a.createElement(G,{anchor:"bottom",open:n,paperOpacity:.5},r.a.createElement("div",{className:a.playbackControls},r.a.createElement(Ze,{playback:t})),r.a.createElement("div",{className:a.playbackProgress},r.a.createElement(Ve,{playback:t}))))};function tt(e){var t=!!e&&/^spotify:[a-zA-Z]+:[a-zA-Z0-9]+$/.test(e);if(!e||!t)return null;var a=e.split(":");return Object(l.a)(a,3)[2]}function at(){return(at=Object(p.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=tt(t)){e.next=3;break}throw new Error("Invaid playlist URI");case 3:return e.next=5,R.get("https://api.spotify.com/v1/playlists/".concat(a));case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){var t,a=Object(m.b)(["playlist",e],(function(){return function(e){return at.apply(this,arguments)}(e)})).data;return a?{uri:(t=a).uri,href:t.href,name:t.name,image:M(t.images)[0]}:null}var rt=Object(B.a)({root:{width:"100%",display:"flex",justifyContent:"center",opacity:function(e){return e.hasPlaylist?1:0},transition:"0.8s opacity ease"},imageWrap:{width:80,height:80,padding:20},image:{borderRadius:2,boxShadow:"4px 4px 20px rgba(0, 0, 0, 0.25)",overflow:"hidden"},details:{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:20,paddingBottom:20},label:{opacity:.5},name:{maxWidth:"calc(58.59375vh - 80px)",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}),it=function(e){var t=nt(e.playlistUri),a=rt({hasPlaylist:null!==t}),i=Object(n.useState)(""),c=Object(l.a)(i,2),o=c[0],u=c[1],s=Object(n.useState)(""),p=Object(l.a)(s,2),f=p[0],d=p[1];return Object(n.useEffect)((function(){u(t?t.name:""),d(t?t.image.url:"")}),[t]),r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.imageWrap},f&&r.a.createElement(oe,{imageUrl:f,className:a.image})),r.a.createElement("div",{className:a.details},o&&r.a.createElement($,{size:14,component:"div",className:a.label},"Playlist"),o&&r.a.createElement($,{size:18,weight:"medium",className:a.name,component:"div"},o)))},ct=Object(B.a)({root:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:10,color:"#fff"},details:{position:"absolute",top:80,left:50,width:"58.59375vh",height:"calc(100vh - 160px)",display:"flex",flexDirection:"column",justifyContent:"flex-start"},playlist:{height:function(e){return e.hasPlaylist?80:50},transition:"0.8s height cubic-bezier(.25, .25, 0, 1)",overflow:"hidden",position:"relative",zIndex:10},art:{width:"58.59375vh",height:"58.59375vh",boxShadow:function(e){return e.hasArt?"4px 4px 100px #000":"none"}},title:{display:"flex",flex:1,alignItems:"center",justifyContent:"center"}}),ot=function(e){var t=e.title,a=e.art,n=e.context,i=void 0!==a,c=(null===n||void 0===n?void 0:n.type)===F.Playlist,o=ct({hasArt:i,hasPlaylist:c}),u=n&&c?n.uri:null;return r.a.createElement("div",{className:o.root},r.a.createElement("div",{className:o.details},r.a.createElement("div",{className:o.playlist},c&&r.a.createElement(it,{playlistUri:u})),r.a.createElement("div",{className:o.art},r.a.createElement(oe,{imageUrl:a||""})),r.a.createElement("div",{className:o.title},r.a.createElement(Ye.a,{variant:"h5",component:"div"},t||""))))};function ut(e){return{display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical",overflow:"hidden"}}var st=Object(B.a)({root:{position:"fixed",top:80,right:50,width:"calc(100vw - 58.59375vh - 150px)",height:"calc(100vh - 160px)",zIndex:10,display:"flex",flexDirection:"column",color:"#fff",paddingBottom:function(e){return e.hasPlaylist?80:110},transition:"0.8s padding-bottom cubic-bezier(.25, .25, 0, 1)"},details:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flex:1,textAlign:"center"},name:Object(D.a)({},ut(3)),artist:Object(D.a)({opacity:.8,marginBottom:10},ut(2)),description:Object(D.a)({opacity:.8,marginTop:30,maxWidth:900},ut(4))}),lt=function(e){var t=e.type,a=e.item,n=e.context,i=(null===n||void 0===n?void 0:n.type)===F.Playlist,c=st({hasPlaylist:i}),o=t===I.Track&&a?a.artist:null,u=t===I.Episode&&a?a.description:null;return r.a.createElement("div",{className:c.root},r.a.createElement("div",{className:c.details},o&&r.a.createElement($,{size:30,component:"div",className:c.artist},o),r.a.createElement($,{size:40,component:"div",className:c.name},a?a.name:""),u&&r.a.createElement($,{size:24,component:"div",className:c.description},u)))},pt=Object(B.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",backgroundColor:"#000",color:"#fff"},logo:{"& > svg":{width:"15vw",height:"15vw"}},message:{marginTop:60}}),ft=function(e){var t=e.message,a=pt();return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.logo},r.a.createElement(X,null)),t&&r.a.createElement("div",{className:a.message},r.a.createElement($,{size:30,component:"div"},t)))},dt=Object(B.a)({root:{},device:{display:"flex",flexDirection:"column",justifyContent:"flex-end",flex:1,paddingLeft:20,paddingRight:20},deviceLabel:{opacity:.8,marginBottom:6},deviceName:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}}),mt=function(){var e=dt(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),i=a[0],c=a[1],u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=Object(m.b)("currentlyPlaying",(function(){return A()}),{enabled:e,cacheTime:0,refetchInterval:e&&t,refetchIntervalInBackground:!1}),n=a.data;return J(n)}(!0,i?1e3:6e3),s=u.type,p=u.playback,f=u.track,d=u.album,v=u.episode,h=u.show,b=u.context,g=null===p||void 0===p?void 0:p.state;Object(n.useEffect)((function(){c(g!==C.InActive)}),[g]);var y=(null===f||void 0===f?void 0:f.name)||(null===v||void 0===v?void 0:v.name),k=(null===f||void 0===f?void 0:f.artist)||(null===h||void 0===h?void 0:h.name),w=y&&k?"".concat(y," | ").concat(k):null;return Object(n.useEffect)((function(){o(w)}),[w]),(null===p||void 0===p?void 0:p.state)===C.InActive?r.a.createElement(ft,{message:"Start playing music on one of your Spotify connected devices..."}):r.a.createElement("div",{className:e.root},r.a.createElement(V,{logo:r.a.createElement(X,null),left:r.a.createElement("div",{className:e.device},p&&p.device&&r.a.createElement(r.a.Fragment,null,r.a.createElement($,{size:12,className:e.deviceLabel,component:"div"},"Playing on:"),r.a.createElement($,{size:14,className:e.deviceName,component:"div",weight:"medium"},p.device.name))),right:r.a.createElement(re,null)}),r.a.createElement(se,{item:d||h}),r.a.createElement(et,{playback:p}),r.a.createElement(ot,{title:(null===d||void 0===d?void 0:d.name)||(null===h||void 0===h?void 0:h.name),art:(null===d||void 0===d?void 0:d.image.url)||(null===h||void 0===h?void 0:h.image.url),context:b}),r.a.createElement(lt,{type:s,item:f||v,context:b}))},vt=function(){var e=N();return Object(n.useEffect)((function(){var e=null,t=function(){e=document.title,o(null)},a=function(){e&&o(e)};return window.addEventListener("blur",t),window.addEventListener("focus",a),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",a)}}),[]),e?r.a.createElement(mt,null):null};a(144);c.a.render(r.a.createElement(vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){e.exports=a(145)}},[[74,1,2]]]);
//# sourceMappingURL=main.336643ba.chunk.js.map