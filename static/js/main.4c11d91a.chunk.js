(this["webpackJsonpspotify-player"]=this["webpackJsonpspotify-player"]||[]).push([[0],{148:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),o=a(75);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Spotify Player",a=e?"".concat(e," - ").concat(t):t;document.title=a}var s=a(2),l=a.n(s),p=a(16),f=a(4),d=a(27),m=a.n(d),v=a(22);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=new URLSearchParams(e),a={};return t.forEach((function(e,t){a[t]=e})),a}var b={accessToken:void 0,expiresAt:void 0,refreshToken:void 0};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&"),n="https://chameleon-spotify-auth.herokuapp.com/".concat(e,"?").concat(a);return n}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage;t.setItem("spotify-auth",JSON.stringify(e))}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage,t=e.getItem("spotify-auth");return t?JSON.parse(t):null}function w(e){if(!e)return!1;var t=e.expiresAt;return!!t&&Date.now()>t-6e3}function x(e){e||(e=g("login",{returnUrl:"".concat(window.location.protocol,"//").concat(window.location.host,"/")})),window.location.href=e}function E(e,t){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(l.a.mark((function e(t,a){var n,r,i,c,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",b);case 2:return a||(a=g("refresh",{refresh_token:t})),e.prev=3,e.next=6,m.a.get(a);case 6:return n=e.sent,r=n.data,i=r.access_token,c=r.expires_in,o=Date.now()+1e3*Number(c),y(u={accessToken:i,expiresAt:o,refreshToken:t}),v.a.invalidateQueries("currentUser"),e.abrupt("return",u);case 15:return e.prev=15,e.t0=e.catch(3),e.abrupt("return",b);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function j(){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=k())||x(),!w(t)){e.next=6;break}return e.next=5,E(null===(a=t)||void 0===a?void 0:a.refreshToken);case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=h(e),a=t.access_token,n=t.expires_in,r=t.refresh_token;if(!a)return null;var i=Date.now()+1e3*Number(n),c={accessToken:a,refreshToken:r,expiresAt:i};return c}();e&&(y(e),window.location.href="/")}),[]);var i=k();return Object(n.useEffect)((function(){i?w(i)?(r(!1),Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(i.refreshToken);case 2:r(!0);case 3:case"end":return e.stop()}}),e)})))()):r(!0):x()}),[i]),a}var C,S,z,I,T,F,B,R=a(170);!function(e){e[e.PausePlayback=0]="PausePlayback",e[e.ResumePlayback=1]="ResumePlayback",e[e.SkipNext=2]="SkipNext",e[e.SkipPrevious=3]="SkipPrevious",e[e.ShuffleOn=4]="ShuffleOn",e[e.ShuffleOff=5]="ShuffleOff",e[e.RepeatOnContext=6]="RepeatOnContext",e[e.RepeatOnTrack=7]="RepeatOnTrack",e[e.RepeatOff=8]="RepeatOff"}(C||(C={})),function(e){e.Playing="playing",e.Paused="paused",e.InActive="inactive"}(S||(S={})),function(e){e.On="on",e.Off="off"}(z||(z={})),function(e){e.Off="off",e.Context="context",e.Track="track"}(I||(I={})),function(e){e.Track="track",e.Episode="episode"}(T||(T={})),function(e){e.Forward="forward",e.Back="back"}(F||(F={})),function(e){e.Playlist="playlist",e.Album="album",e.Show="show"}(B||(B={}));var A={get:function(e){return new Promise(function(){var t=Object(f.a)(l.a.mark((function t(a,n){var r,i,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={},t.next=4,j();case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:if(i=t.t0,c=i.accessToken){t.next=11;break}return t.abrupt("return",n("Spotify not authenticated"));case 11:return r.headers={Authorization:"Bearer ".concat(c)},t.next=14,m.a.get(e,r);case 14:return o=t.sent,t.abrupt("return",a(o));case 18:return t.prev=18,t.t1=t.catch(0),t.t1,t.abrupt("return",n(t.t1));case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,a){return t.apply(this,arguments)}}())},post:function(e,t){return new Promise(function(){var a=Object(f.a)(l.a.mark((function a(n,r){var i,c,o,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={},a.next=4,j();case 4:if(a.t0=a.sent,a.t0){a.next=7;break}a.t0={};case 7:if(c=a.t0,o=c.accessToken){a.next=11;break}return a.abrupt("return",r("Spotify not authenticated"));case 11:return i.headers={Authorization:"Bearer ".concat(o)},a.next=14,m.a.post(e,t,i);case 14:return u=a.sent,a.abrupt("return",n(u.data));case 18:return a.prev=18,a.t1=a.catch(0),a.t1,a.abrupt("return",r(a.t1));case 22:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(e,t){return a.apply(this,arguments)}}())},put:function(e,t){return new Promise(function(){var a=Object(f.a)(l.a.mark((function a(n,r){var i,c,o,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={},a.next=4,j();case 4:if(a.t0=a.sent,a.t0){a.next=7;break}a.t0={};case 7:if(c=a.t0,o=c.accessToken){a.next=11;break}return a.abrupt("return",r("Spotify not authenticated"));case 11:return i.headers={Authorization:"Bearer ".concat(o)},a.next=14,m.a.put(e,t,i);case 14:return u=a.sent,a.abrupt("return",n(u.data));case 18:return a.prev=18,a.t1=a.catch(0),a.t1,a.abrupt("return",r(a.t1));case 22:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(e,t){return a.apply(this,arguments)}}())}};function _(){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("https://api.spotify.com/v1/me/player?additional_types=track,episode");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=a(13),U=a.n(W);function D(e){return e.map((function(e){return{uri:e.uri,href:e.href,name:e.name}}))}var M=a(21);function J(e){return e.map((function(e){return Object(M.a)({},e)}))}function H(e){var t=U()(e,"currently_playing_type",null),a=function(e,t){var a,n=U()(e,"is_playing",null),r=U()(e,"progress_ms",0),i=U()(e,"item.duration_ms",0),c=i-r,o=U()(e,"shuffle_state",!1),u=U()(e,"repeat_state",!1),s=(a=U()(e,"device",null))?{id:a.id,name:a.name,type:a.type,active:a.is_active,volume:a.volume_percent}:null,l=S.InActive;return null!==n&&(l=n?S.Playing:S.Paused),{state:l,shuffle:o?z.On:z.Off,current:Math.round(r/1e3),duration:Math.round(i/1e3),remaining:Math.round(c/1e3),type:t,repeat:u,device:s}}(e,t),n=null,r=null;t===T.Track&&(r=function(e){if(!e)return null;var t=e.uri,a=e.href,n=e.name,r=D(e.artists);return{uri:t,href:a,name:n,artist:r.map((function(e){return e.name})).join(", "),artists:r,image:J(e.images)[0]}}(U()(e,"item.album")),n=function(e,t){if(!e)return null;var a=e.uri,n=e.href,r=e.name,i=e.track_number,c=e.duration_ms,o=D(e.artists);return{uri:a,href:n,name:r,artist:o.map((function(e){return e.name})).join(", "),artists:o,trackNumber:i,duration:c,album:t||""}}(U()(e,"item"),r&&r.name));var i,c,o=null,u=null;return t===T.Episode&&(u=(i=U()(e,"item.show"))?{uri:i.uri,href:i.href,name:i.name,description:i.description,publisher:i.publisher,image:J(i.images)[0]}:null,o=function(e,t){return e?{uri:e.uri,href:e.href,name:e.name,description:e.description,duration:e.duration_ms,show:t||""}:null}(U()(e,"item"),u&&u.name)),{type:t,playback:a,track:n,album:r,episode:o,show:u,context:(c=U()(e,"context"))?{uri:c.uri,href:c.href,type:c.type}:null}}var Z=a(5),$=Object(R.a)({root:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif;',fontSize:function(e){return e.fontSize},fontWeight:function(e){return e.fontWeight},lineHeight:1.235,letterSpacing:"0.00735em"}});var Q=function(e){var t,a=e.children,n=e.className,i=e.scaled,c=e.size,o=e.weight,u=void 0===o?"regular":o,s=e.component,l=void 0===s?"span":s,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=16;if(e=e||a,t){var n="vw"===t?1024:768;return"".concat(e/n*100).concat(t)}return"".concat(e/a,"rem")}(c,i);switch(u){case"light":t=300;break;case"regular":default:t=400;break;case"medium":t=500;break;case"bold":t=700}var f=$({fontSize:p,fontWeight:t}),d=l;return r.a.createElement(d,{className:Object(Z.a)(f.root,n&&n)},a)},Y=a(76),q=a(175),G=Object(R.a)({paper:{backgroundColor:function(e){return"rgba(0, 0, 0, ".concat(e.paperOpacity,")")},color:"#fff",boxShadow:"none",border:"none",transition:"0.8s transform cubic-bezier(.25, .25, 0, 1) !important",overflowY:"visible"},drawerInner:{display:"flex",alignItems:"center",height:80}}),K=function(e){var t=e.paperOpacity,a=void 0===t?1:t,n=Object(Y.a)(e,["paperOpacity"]),i=G({paperOpacity:a});return r.a.createElement(q.a,Object.assign({},n,{variant:"persistent",classes:{paper:i.paper},ModalProps:{hideBackdrop:!0},transitionDuration:800}),r.a.createElement("div",{className:i.drawerInner},e.children))},V=Object(R.a)({root:{position:"absolute",zIndex:999},left:{marginRight:"auto"},right:{marginLeft:"auto"},logo:{position:"absolute",top:20,left:"calc(50% - 20px)",width:40,height:40,margin:"0 auto","& svg":{width:40,height:40}}}),X=function(e){var t=e.left,a=e.right,n=e.logo,i=V();return r.a.createElement("div",{className:i.root},r.a.createElement(K,{anchor:"top",open:!0,paperOpacity:.99},t&&r.a.createElement("div",{className:i.left},t),n&&r.a.createElement("div",{className:i.logo},n),a&&r.a.createElement("div",{className:i.right},a)))},ee=function(){return r.a.createElement("svg",{viewBox:"0 0 512 512"},r.a.createElement("circle",{style:{fill:"#50B95D"},cx:"256",cy:"256",r:"256"}),r.a.createElement("path",{style:{fill:"#20A83E"},d:"M34.133,256c0-135.648,105.508-246.636,238.933-255.42C267.424,0.208,261.737,0,256,0 C114.615,0,0,114.615,0,256s114.615,256,256,256c5.737,0,11.424-0.208,17.067-0.58C139.642,502.636,34.133,391.648,34.133,256z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M358.23,335.212L358.23,335.212c-48.438-21.419-100.06-32.278-153.43-32.278 c-31.435,0-62.695,3.854-92.913,11.454c-11.408,2.869-18.355,14.485-15.485,25.893c2.869,11.406,14.483,18.353,25.893,15.485 c26.816-6.746,54.575-10.165,82.506-10.165c47.392,0,93.207,9.634,136.176,28.635c8.213,3.631,18.391,1.478,24.423-5.178 c5.613-6.194,6.945-15.57,3.569-23.173C366.867,341.153,362.961,337.303,358.23,335.212z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M386.652,259.147c-57.538-24.737-118.722-37.28-181.852-37.28c-31.25,0-62.486,3.15-92.839,9.361 c-13.662,2.796-22.749,16.529-19.949,30.212c2.829,13.822,16.377,22.777,30.212,19.948c26.986-5.521,54.768-8.321,82.576-8.321 c56.134,0,110.515,11.142,161.63,33.118c9.554,4.107,21.119,1.799,28.405-5.61c7.328-7.452,9.173-19.09,4.917-28.574 C397.177,266.262,392.429,261.631,386.652,259.147z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M444.853,196.524c-2.849-7.452-8.429-13.348-15.712-16.603 C358.38,148.3,282.901,132.267,204.8,132.267c-36.37,0-72.745,3.573-108.113,10.621c-11.318,2.255-20.645,11.296-23.27,22.532 c-2.902,12.42,2.736,25.532,13.526,32.211c6.365,3.94,14.074,5.305,21.417,3.838C139.894,195.186,172.341,192,204.8,192 c69.648,0,136.928,14.285,199.971,42.457c8.618,3.852,18.891,3.334,27.07-1.381c7.268-4.191,12.572-11.468,14.337-19.669 C447.383,207.802,446.899,201.874,444.853,196.524z"}))},te=a(176);function ae(){return(ae=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("https://api.spotify.com/v1/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return function(e){if(!e)return null;var t=e.uri,a=e.href,n=e.display_name,r=J(e.images),i=n?n.split(" ").map((function(e){return e[0]})).join("").toUpperCase():"";return{uri:t,href:a,displayName:n,initials:i,image:r[0]}}(Object(v.b)("currentUser",(function(){return function(){return ae.apply(this,arguments)}()})).data)}var re=Object(R.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(2)},name:{marginRight:e.spacing(2)}}})),ie=function(){var e=re(),t=ne();if(!t)return null;var a=t.displayName,n=t.initials,i=t.image;return r.a.createElement("div",{className:e.root},r.a.createElement(Q,{size:16,component:"div",className:e.name},a),r.a.createElement(te.a,{alt:a,src:i.url},n))};function ce(){return(ce=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(f.a)(l.a.mark((function e(a,n){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(r=document.createElement("div")).setAttribute("style","\n        position: absolute;\n        width: 0;\n        height: 0;\n        overflow: hidden;\n        background-color: red;\n      "),(i=document.createElement("img")).setAttribute("src",t),i.addEventListener("load",(function(e){var t={loaded:!0,width:i.clientWidth,height:i.clientHeight};r.parentElement.removeChild(r),a(t)})),r.appendChild(i),document.body.appendChild(r)}catch(c){n(c)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=Object(R.a)({root:{width:function(e){return e.width?e.width:"100%"},height:function(e){return e.height?e.height:"100%"},backgroundColor:function(e){return e.backgroundColor?e.backgroundColor:"transparent"},transition:function(e){return"".concat(e.duration,"ms background-color ease")}},image:{width:"100%",height:"100%",backgroundImage:function(e){return e.backgroundImage?e.backgroundImage:"none"},backgroundRepeat:function(e){return e.backgroundRepeat?e.backgroundRepeat:"no-repeat"},backgroundPosition:function(e){return e.backgroundPosition?e.backgroundPosition:"center center"},backgroundSize:function(e){return e.backgroundSize?e.backgroundSize:"cover"},transition:function(e){return"".concat(e.duration,"ms background-image ease, ").concat(e.duration,"ms opacity ease")}}}),ue=function(e){var t=e.imageUrl,a=e.duration,i=void 0===a?1e3:a,c=e.className,o=oe(Object(M.a)(Object(M.a)({},e),{},{duration:i})),u=Object(n.useState)(!1),s=Object(p.a)(u,2),l=s[0],f=s[1],d=Object(n.useState)(""),m=Object(p.a)(d,2),v=m[0],h=m[1];Object(n.useEffect)((function(){v===t&&l||(""!==t?function(e){return ce.apply(this,arguments)}(t).then((function(e){!function(e){h(e),f(!0)}(t)})):(f(!1),setTimeout((function(){return h("none")}),i)))}),[t,l,v,i]);var b=l?1:0,g=v?"url(".concat(v,")"):e.backgroundImage?"url(".concat(e.backgroundImage):"none";return r.a.createElement("div",{className:Object(Z.a)(o.root,c&&c)},r.a.createElement("div",{className:o.image,style:{backgroundImage:g,opacity:b}}))},se=Object(R.a)({fill:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},root:{zIndex:0,userSelect:"none",overflow:"hidden"},overlay:{backdropFilter:"blur(20px)",backgroundColor:"rgba(0, 0, 0, 0.33)",zIndex:2},image:{zIndex:1,transform:"scale(1.2)",transition:"1.25s transform cubic-bezier(.25, .25, 0, 1)"}}),le=function(e){var t=e.item,a=se({});return r.a.createElement("div",{className:Object(Z.a)(a.root,a.fill)},r.a.createElement("div",{className:Object(Z.a)(a.overlay,a.fill)}),r.a.createElement("div",{className:Object(Z.a)(a.image,a.fill)},r.a.createElement(ue,{imageUrl:t?t.image.url:"",backgroundColor:"#000"})))};function pe(e){switch(e){case"small":return 20;case"medium":default:return 40;case"large":return 50;case"x-large":return 80}}var fe=Object(R.a)({root:{width:"100%",display:"flex",alignItems:"center",justifyContent:function(e){return e.align?function(e){switch(e){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}}(e.align):"center"}},button:{position:"relative",width:function(e){return e.size?pe(e.size):40},height:function(e){return e.size?pe(e.size):40},marginLeft:20,marginRight:20,padding:0,appearance:"none",background:"none",border:"none",cursor:"pointer","&:active, &:focus":{outline:0}},icon:{"& > svg":{position:"absolute",top:0,left:0,width:function(e){return e.size?pe(e.size):40},height:function(e){return e.size?pe(e.size):40},"& path":{fill:function(e){return e.active?"#50B95D":"#fff"},transition:"0.3s fill ease"}}}}),de=function(e){var t=e.children,a=e.size,n=e.active,i=e.onClick,c=fe({size:a,active:n});return r.a.createElement("button",{className:c.button,onClick:i||void 0},r.a.createElement("div",{className:c.icon},t))},me=function(e){var t=e.align,a=fe({align:void 0===t?"center":t});return r.a.createElement("div",{className:a.root},e.children)};function ve(){return(ve=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put("https://api.spotify.com/v1/me/player/play",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put("https://api.spotify.com/v1/me/player/pause",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=a(68),ge=a.n(be),ye=a(67),ke=a.n(ye),we=function(e){var t=e.playbackState;return r.a.createElement(de,{size:"x-large",onClick:function(){t===S.Paused&&function(){ve.apply(this,arguments)}(),t===S.Playing&&function(){he.apply(this,arguments)}()}},t===S.Playing&&r.a.createElement(ke.a,null),t===S.Paused&&r.a.createElement(ge.a,null))};function xe(){return(xe=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("https://api.spotify.com/v1/me/player/next",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("https://api.spotify.com/v1/me/player/previous",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return(je=Object(f.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put("https://api.spotify.com/v1/me/player/seek?position_ms=".concat(t),{});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=a(69),Pe=a.n(Ne),Ce=a(71),Se=a.n(Ce),ze=a(70),Ie=a.n(ze),Te=a(72),Fe=a.n(Te),Be=function(e){var t=e.playback,a=e.direction,n=t.type;return r.a.createElement(de,{size:"large",onClick:function(){if(n===T.Track&&(a===F.Forward&&function(){xe.apply(this,arguments)}(),a===F.Back&&function(){Ee.apply(this,arguments)}()),n===T.Episode){if(a===F.Forward)Oe(1e3*(t.current+30));if(a===F.Back)Oe(1e3*(t.current-30))}}},a===F.Back&&r.a.createElement(r.a.Fragment,null,n===T.Track&&r.a.createElement(Pe.a,null),n===T.Episode&&r.a.createElement(Ie.a,null)),a===F.Forward&&r.a.createElement(r.a.Fragment,null,n===T.Track&&r.a.createElement(Se.a,null),n===T.Episode&&r.a.createElement(Fe.a,null)))};function Re(){return(Re=Object(f.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put("https://api.spotify.com/v1/me/player/shuffle?state=".concat(String(t)),{});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=a(73),_e=a.n(Ae),Le=function(e){var t=e.shuffleState;return r.a.createElement(de,{active:t===z.On,onClick:function(){!function(e){Re.apply(this,arguments)}(!(t===z.On))}},r.a.createElement(_e.a,null))};function We(){return(We=Object(f.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put("https://api.spotify.com/v1/me/player/repeat?state=".concat(t),{});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ue=a(45),De=a.n(Ue),Me=a(74),Je=a.n(Me),He=function(e){var t=e.repeatState,a=t!==I.Off;return r.a.createElement(de,{active:a,onClick:function(){var e;switch(t){default:case I.Off:e=I.Context;break;case I.Context:e=I.Track;break;case I.Track:e=I.Off}!function(e){We.apply(this,arguments)}(e)}},t===I.Off&&r.a.createElement(De.a,null),t===I.Context&&r.a.createElement(De.a,null),t===I.Track&&r.a.createElement(Je.a,null))},Ze=Object(R.a)({playbackControls:{width:"100%",height:80}}),$e=function(e){var t=Ze(),a=e.playback;return r.a.createElement("div",{className:t.playbackControls},r.a.createElement(me,null,a.type===T.Track&&r.a.createElement(Le,{shuffleState:a.shuffle}),r.a.createElement(Be,{playback:a,direction:F.Back}),r.a.createElement(we,{playbackState:a.state}),r.a.createElement(Be,{playback:a,direction:F.Forward}),a.type===T.Track&&r.a.createElement(He,{repeatState:a.repeat})))},Qe=a(12),Ye=a(173),qe=a(174);function Ge(e){var t=Math.floor(e/60),a=e-60*t;return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))}var Ke=Object(R.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",height:80,textAlign:"right",paddingRight:16,userSelect:"none"},playbackProgressCurrent:{fontWeight:500},playbackProgressPaused:{display:"inline-block",opacity:function(e){return e.playbackState&&e.playbackState===S.Paused?.5:0},marginRight:10,transition:"0.3s opacity ease"},playbackProgressTotal:{opacity:.5},playbackProgressBar:{position:"absolute",top:-4,left:0,width:"100%",height:4}}),Ve=Object(Qe.a)({root:{height:4,backgroundColor:"rgba(255, 255, 255, 0.15)"},bar:{backgroundColor:"#fff",transition:"transform 0s linear"}})(Ye.a),Xe=function(e){var t=e.playback,a=Ke({playbackState:t.state}),n=t.duration,i=t.current,c=t.remaining,o=i/n*100;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{className:a.playbackProgressBar,variant:"determinate",value:o}),r.a.createElement("div",{className:a.root},r.a.createElement(qe.a,{variant:"h5",component:"div",className:a.playbackProgressCurrent},r.a.createElement("span",{className:a.playbackProgressPaused},"Paused"),Ge(i)),r.a.createElement(qe.a,{variant:"subtitle1",component:"div",className:a.playbackProgressTotal},"-",Ge(c)," / ",Ge(n))))},et=Object(R.a)({root:{position:"absolute",zIndex:999},playbackControls:{width:"58.59375vh",marginLeft:50},playbackProgress:{marginLeft:"auto"}}),tt=function(e){var t=e.playback,a=et();if(!t)return null;var n=t.state===S.Playing||t.state===S.Paused;return r.a.createElement("div",{className:a.root},r.a.createElement(K,{anchor:"bottom",open:n,paperOpacity:.5},r.a.createElement("div",{className:a.playbackControls},r.a.createElement($e,{playback:t})),r.a.createElement("div",{className:a.playbackProgress},r.a.createElement(Xe,{playback:t}))))};function at(e){var t=!!e&&/^spotify:[a-zA-Z]+:[a-zA-Z0-9]+$/.test(e);if(!e||!t)return null;var a=e.split(":");return Object(p.a)(a,3)[2]}function nt(){return(nt=Object(f.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=at(t)){e.next=3;break}throw new Error("Invaid playlist URI");case 3:return e.next=5,A.get("https://api.spotify.com/v1/playlists/".concat(a));case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){var t,a=Object(v.b)(["playlist",e],(function(){return function(e){return nt.apply(this,arguments)}(e)})).data;return a?{uri:(t=a).uri,href:t.href,name:t.name,image:J(t.images)[0]}:null}var it=Object(R.a)({root:{width:"100%",display:"flex",justifyContent:"center",opacity:function(e){return e.hasPlaylist?1:0},transition:"0.8s opacity ease"},imageWrap:{width:80,height:80,padding:20},image:{borderRadius:2,boxShadow:"4px 4px 20px rgba(0, 0, 0, 0.25)",overflow:"hidden"},details:{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:20,paddingBottom:20},label:{opacity:.5},name:{maxWidth:"calc(58.59375vh - 80px)",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}),ct=function(e){var t=rt(e.playlistUri),a=it({hasPlaylist:null!==t}),i=Object(n.useState)(""),c=Object(p.a)(i,2),o=c[0],u=c[1],s=Object(n.useState)(""),l=Object(p.a)(s,2),f=l[0],d=l[1];return Object(n.useEffect)((function(){u(t?t.name:""),d(t?t.image.url:"")}),[t]),r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.imageWrap},f&&r.a.createElement(ue,{imageUrl:f,className:a.image})),r.a.createElement("div",{className:a.details},o&&r.a.createElement(Q,{size:14,component:"div",className:a.label},"Playlist"),o&&r.a.createElement(Q,{size:18,weight:"medium",className:a.name,component:"div"},o)))},ot=Object(R.a)({root:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:10,color:"#fff"},details:{position:"absolute",top:80,left:50,width:"58.59375vh",height:"calc(100vh - 160px)",display:"flex",flexDirection:"column",justifyContent:"flex-start"},playlist:{height:function(e){return e.hasPlaylist?80:50},transition:"0.8s height cubic-bezier(.25, .25, 0, 1)",overflow:"hidden",position:"relative",zIndex:10},art:{width:"58.59375vh",height:"58.59375vh",boxShadow:function(e){return e.hasArt?"4px 4px 100px #000":"none"}},title:{display:"flex",flex:1,alignItems:"center",justifyContent:"center"}}),ut=function(e){var t=e.title,a=e.art,n=e.context,i=void 0!==a,c=(null===n||void 0===n?void 0:n.type)===B.Playlist,o=ot({hasArt:i,hasPlaylist:c}),u=n&&c?n.uri:null;return r.a.createElement("div",{className:o.root},r.a.createElement("div",{className:o.details},r.a.createElement("div",{className:o.playlist},c&&r.a.createElement(ct,{playlistUri:u})),r.a.createElement("div",{className:o.art},r.a.createElement(ue,{imageUrl:a||""})),r.a.createElement("div",{className:o.title},r.a.createElement(qe.a,{variant:"h5",component:"div"},t||""))))};function st(e){return{display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical",overflow:"hidden"}}var lt=Object(R.a)({root:{position:"fixed",top:80,right:50,width:"calc(100vw - 58.59375vh - 150px)",height:"calc(100vh - 160px)",zIndex:10,display:"flex",flexDirection:"column",color:"#fff",paddingBottom:function(e){return e.hasPlaylist?80:110},transition:"0.8s padding-bottom cubic-bezier(.25, .25, 0, 1)"},details:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flex:1,textAlign:"center"},name:Object(M.a)({},st(3)),artist:Object(M.a)({opacity:.8,marginBottom:10},st(2)),description:Object(M.a)({opacity:.8,marginTop:30,maxWidth:900},st(4))}),pt=function(e){var t=e.type,a=e.item,n=e.context,i=(null===n||void 0===n?void 0:n.type)===B.Playlist,c=lt({hasPlaylist:i}),o=t===T.Track&&a?a.artist:null,u=t===T.Episode&&a?a.description:null;return r.a.createElement("div",{className:c.root},r.a.createElement("div",{className:c.details},o&&r.a.createElement(Q,{size:30,component:"div",className:c.artist},o),r.a.createElement(Q,{size:40,component:"div",className:c.name},a?a.name:""),u&&r.a.createElement(Q,{size:24,component:"div",className:c.description},u)))},ft=Object(R.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",backgroundColor:"#000",color:"#fff"},logo:{"& > svg":{width:"15vw",height:"15vw"}},message:{marginTop:60}}),dt=function(e){var t=e.message,a=ft();return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.logo},r.a.createElement(ee,null)),t&&r.a.createElement("div",{className:a.message},r.a.createElement(Q,{size:30,component:"div"},t)))},mt=Object(R.a)({root:{},device:{display:"flex",flexDirection:"column",justifyContent:"flex-end",flex:1,paddingLeft:20,paddingRight:20},deviceLabel:{opacity:.8,marginBottom:6},deviceName:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}}),vt=function(){var e=mt(),t=Object(n.useState)(!1),a=Object(p.a)(t,2),i=a[0],c=a[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=Object(v.b)("currentlyPlaying",(function(){return _()}),{enabled:e,cacheTime:0,refetchInterval:e&&t,refetchIntervalInBackground:!1}),n=a.data;return H(n)}(!0,i?1e3:6e3),s=o.type,l=o.playback,f=o.track,d=o.album,m=o.episode,h=o.show,b=o.context,g=null===l||void 0===l?void 0:l.state;Object(n.useEffect)((function(){c(g!==S.InActive)}),[g]);var y=(null===f||void 0===f?void 0:f.name)||(null===m||void 0===m?void 0:m.name),k=(null===f||void 0===f?void 0:f.artist)||(null===h||void 0===h?void 0:h.name),w=y&&k?"".concat(y," | ").concat(k):null;return Object(n.useEffect)((function(){u(w)}),[w]),(null===l||void 0===l?void 0:l.state)===S.InActive?r.a.createElement(dt,{message:"Start playing music on one of your Spotify connected devices..."}):r.a.createElement("div",{className:e.root},r.a.createElement(X,{logo:r.a.createElement(ee,null),left:r.a.createElement("div",{className:e.device},l&&l.device&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{size:12,className:e.deviceLabel,component:"div"},"Playing on:"),r.a.createElement(Q,{size:14,className:e.deviceName,component:"div",weight:"medium"},l.device.name))),right:r.a.createElement(ie,null)}),r.a.createElement(le,{item:d||h}),r.a.createElement(tt,{playback:l}),r.a.createElement(ut,{title:(null===d||void 0===d?void 0:d.name)||(null===h||void 0===h?void 0:h.name),art:(null===d||void 0===d?void 0:d.image.url)||(null===h||void 0===h?void 0:h.image.url),context:b}),r.a.createElement(pt,{type:s,item:f||m,context:b}))},ht=function(){var e=P();return Object(n.useEffect)((function(){var e=null,t=function(){e=document.title,u(null)},a=function(){e&&u(e)};return window.addEventListener("blur",t),window.addEventListener("focus",a),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",a)}}),[]),e?r.a.createElement(vt,null):null};a(148);c.a.render(r.a.createElement(o.a,null,r.a.createElement(ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a(150)}},[[80,1,2]]]);
//# sourceMappingURL=main.4c11d91a.chunk.js.map