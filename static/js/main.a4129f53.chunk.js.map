{"version":3,"sources":["serviceWorker.ts","utils/setWindowTitle.ts","utils/getQueryStringParams.ts","services/spotify-auth/index.ts","enums.ts","services/spotify-api/index.ts","services/spotify-api/resources/player/getCurrentlyPlaying.ts","services/spotify-api/utils/digestArtists.ts","services/spotify-api/utils/digestImages.ts","services/spotify-api/utils/digestCurrentlyPlaying.ts","services/spotify-api/utils/digestPlayback.ts","services/spotify-api/utils/digestDevice.ts","services/spotify-api/utils/digestAlbum.ts","services/spotify-api/utils/digestTrack.ts","services/spotify-api/utils/digestShow.ts","services/spotify-api/utils/digestContext.ts","services/spotify-api/utils/digestEpisode.ts","components/Typography/index.tsx","components/CustomDrawer/index.tsx","components/TopBar/index.tsx","components/SpotifyLogo/index.tsx","services/spotify-api/resources/user/getCurrentUser.ts","services/spotify-api/queries/useCurrentUser.ts","services/spotify-api/utils/digestUser.ts","components/PlaybackUser/index.tsx","utils/preloadImage.ts","components/CrossfadeImage/index.tsx","components/PlaybackBackdrop/index.tsx","components/ControlButtons/index.tsx","services/spotify-api/resources/player/play.ts","services/spotify-api/resources/player/pause.ts","components/PlaybackBar/PlayPauseButton.tsx","services/spotify-api/resources/player/next.ts","services/spotify-api/resources/player/previous.ts","services/spotify-api/resources/player/seek.ts","components/PlaybackBar/SkipButton.tsx","services/spotify-api/resources/player/shuffle.ts","components/PlaybackBar/ShuffleButton.tsx","services/spotify-api/resources/player/repeat.ts","components/PlaybackBar/RepeatButton.tsx","components/PlaybackBar/PlaybackControls.tsx","utils/timeString.ts","components/PlaybackBar/PlaybackProgress.tsx","components/PlaybackBar/index.tsx","services/spotify-api/utils/getSpotifyIdFromUri.ts","services/spotify-api/resources/playlists/getPlaylist.ts","services/spotify-api/queries/usePlaylist.ts","services/spotify-api/utils/digestPlaylist.ts","components/PlaybackContext/ContextPlaylist.tsx","components/PlaybackContext/index.tsx","utils/styles.ts","components/PlaybackItem/index.tsx","components/SpotifyPlaceholder/index.tsx","screens/SpotifyPlayer/index.tsx","services/spotify-api/queries/useCurrentlyPlaying.ts","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","setWindowTitle","newTitle","defaultTitle","title","document","getQueryStringParams","queryString","search","queryStringParams","URLSearchParams","params","forEach","value","key","initialSpotifyAuth","accessToken","undefined","expiresAt","refreshToken","getAuthUrl","path","Object","keys","map","encodeURIComponent","join","authUrl","setAuthLocalStorage","spotifyAuth","storage","localStorage","setItem","JSON","stringify","getAuthFromLocalStorage","getItem","parse","hasTokenExpired","Date","now","redirectToLogin","loginUrl","returnUrl","href","refreshAccessToken","refreshUrl","a","refresh_token","axios","get","refreshResponse","data","access_token","expiresIn","expires_in","Number","newAuth","queryCache","invalidateQueries","getAuth","useSpotifyAuth","useState","authenticated","setAuthenticated","useEffect","authFromQueryString","getAuthFromQueryString","authFromLocalStorage","SpotifyAction","PlaybackState","ShuffleState","RepeatState","PlaybackType","PlaybackDirection","PlayingContext","spotifyApi","url","Promise","resolve","reject","options","headers","Authorization","apiResult","post","postData","put","putData","getCurrentlyPlaying","response","digestArtists","artistsData","artist","uri","name","digestImages","imagesArray","image","digestCurrentlyPlaying","type","playback","playbackData","deviceData","isPlaying","currentMs","durationMs","remainingMs","shuffleState","repeat","device","id","active","is_active","volume","volume_percent","state","InActive","Playing","Paused","shuffle","On","Off","current","Math","round","duration","remaining","digestPlayback","track","album","Track","albumData","artists","images","digestAlbum","trackData","trackNumber","track_number","duration_ms","digestTrack","showData","contextData","episode","show","Episode","description","publisher","episodeData","digestEpisode","context","useStyles","makeStyles","root","fontFamily","fontSize","props","fontWeight","lineHeight","letterSpacing","Typography","children","className","scaled","size","weight","component","base","target","calculateFontSize","classes","Wrapper","clsx","paper","backgroundColor","paperOpacity","color","boxShadow","border","transition","overflowY","drawerInner","display","alignItems","height","CustomDrawer","drawerProps","Drawer","variant","ModalProps","hideBackdrop","transitionDuration","position","zIndex","left","marginRight","right","marginLeft","logo","top","width","margin","TopBar","anchor","open","SpotifyLogo","viewBox","style","fill","cx","cy","r","d","useCurrentUser","userData","displayName","display_name","initials","split","n","toUpperCase","digestUser","useQuery","getCurrentUser","theme","justifyContent","padding","spacing","PlaybackUser","currentUser","Avatar","alt","src","preloadImageContainer","createElement","setAttribute","imageElement","addEventListener","e","loaded","clientWidth","clientHeight","parentElement","removeChild","appendChild","body","error","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","CrossfadeImage","imageUrl","hasImage","setHasImage","imageSrc","setImageSrc","preLoadImage","then","setImage","setTimeout","opacity","userSelect","overflow","overlay","backdropFilter","transform","PlaybackBackdrop","item","align","alignment","button","appearance","background","cursor","outline","icon","ControlButton","onClick","ControlButtonGroup","PlayPauseButton","playbackState","play","pause","seek","positionMs","SkipButton","direction","playbackType","Forward","next","Back","previous","String","ShuffleButton","repeatState","RepeatButton","repeatActive","nextRepeatState","Context","playbackControls","PlaybackControls","timeString","totalSeconds","minutes","floor","seconds","padStart","flexDirection","textAlign","paddingRight","playbackProgressCurrent","playbackProgressPaused","playbackProgressTotal","playbackProgressBar","PlaybackProgressBar","withStyles","bar","LinearProgress","PlaybackProgress","currentPercentage","Fragment","playbackProgress","PlaybackBar","showPlaybackBar","getSpotifyIdFromUri","validUri","test","playlistUri","playlistId","Error","usePlaylist","playlistData","getPlaylist","hasPlaylist","imageWrap","borderRadius","details","paddingTop","paddingBottom","label","maxWidth","whiteSpace","textOverflow","ContextPlaylist","playlist","playlistName","setPlaylistName","playlistImage","setPlaylistImage","art","hasArt","flex","PlaybackContext","Playlist","lineClamp","lines","WebkitLineClamp","WebkitBoxOrient","marginBottom","marginTop","PlaybackItem","trackArtist","episodeDescription","message","SpotifyPlaceholder","paddingLeft","deviceLabel","deviceName","SpotifyPlayer","playbackActive","setPlaybackActive","currentlyPlaying","polling","refetchInterval","enabled","cacheTime","refetchIntervalInBackground","useCurrentlyPlaying","itemName","itemArtistOrShow","itemTitle","App","spotifyAuthenticated","existingWindowTitle","handleWindowBlur","handleWindowFocus","removeEventListener","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.a4129f53.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","\nexport default function setWindowTitle(newTitle: string | null, defaultTitle: string = 'Spotify Player'): void {\n  const title = newTitle ? `${newTitle} - ${defaultTitle}` : defaultTitle;\n  document.title = title;\n}\n","\nexport default function getQueryStringParams(queryString: string = window.location.search): {[key: string]: string} {\n  const queryStringParams = new URLSearchParams(queryString);\n  let params = {};\n  queryStringParams.forEach((value: string, key: string) => {\n    params[key] = value;\n  });\n  return params;\n}\n","import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { queryCache } from 'react-query';\nimport { SpotifyAuth } from './types';\nimport getQueryStringParams from 'utils/getQueryStringParams';\n\nconst initialSpotifyAuth: SpotifyAuth = {\n  accessToken: undefined,\n  expiresAt: undefined,\n  refreshToken: undefined,\n};\n\nconst localStorageKey = 'spotify-auth';\n\nexport function getAuthUrl(path: string, params: {[key: string]: string} = {}): string {\n  const queryString = Object.keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`).join('&');\n  const authUrl = `https://chameleon-spotify-auth.herokuapp.com/${path}?${queryString}`; // hard-coded for now, using a custom built Spotify authenticator for demonstration purposes\n  return authUrl;\n}\n\nexport function setAuthLocalStorage(spotifyAuth: SpotifyAuth, storage: Storage = window.localStorage): void {\n  storage.setItem(localStorageKey, JSON.stringify(spotifyAuth));\n}\n\nexport function getAuthFromLocalStorage(storage: Storage = window.localStorage): SpotifyAuth | null {\n  const spotifyAuth = storage.getItem(localStorageKey);\n  return spotifyAuth ? JSON.parse(spotifyAuth) : null;\n}\n\nexport function getAuthFromQueryString(queryString: string = window.location.search): SpotifyAuth | null {\n\n  const {\n    access_token: accessToken,\n    expires_in: expiresIn,\n    refresh_token: refreshToken\n  } = getQueryStringParams(queryString);\n\n  if (!accessToken) return null;\n\n  const expiresAt = Date.now() + (Number(expiresIn) * 1000);\n\n  const spotifyAuth = {\n    accessToken,\n    refreshToken,\n    expiresAt,\n  };\n\n  return spotifyAuth;\n}\n\nexport function hasTokenExpired(spotifyAuth: SpotifyAuth | null): boolean {\n  if (!spotifyAuth) return false;\n  const { expiresAt } = spotifyAuth;\n  if (!expiresAt) return false;\n  return Date.now() > (expiresAt - 6000);\n}\n\nexport function redirectToLogin(loginUrl?: string) {\n  if (!loginUrl) loginUrl = getAuthUrl('login', { returnUrl: window.location.href });\n  window.location.href = loginUrl;\n}\n\nexport async function refreshAccessToken(refreshToken: string | undefined, refreshUrl?: string): Promise<SpotifyAuth>  {\n  if (!refreshToken) return initialSpotifyAuth;\n  if (!refreshUrl) refreshUrl = getAuthUrl('refresh', { refresh_token: refreshToken });\n\n  try {\n    const refreshResponse = await axios.get(refreshUrl);\n    const { access_token: accessToken, expires_in: expiresIn } = refreshResponse.data;\n\n    const expiresAt = Date.now() + (Number(expiresIn) * 1000);\n\n    const newAuth: SpotifyAuth = {\n      accessToken,\n      expiresAt,\n      refreshToken,\n    };\n\n    setAuthLocalStorage(newAuth);\n    queryCache.invalidateQueries('currentUser');\n\n    return newAuth;\n\n  } catch(error) {\n    return initialSpotifyAuth;\n  }\n\n}\n\nexport async function getAuth(): Promise<SpotifyAuth | null> {\n  let spotifyAuth = getAuthFromLocalStorage();\n  if (!spotifyAuth) {\n    redirectToLogin();\n  }\n\n  if (hasTokenExpired(spotifyAuth)) {\n    spotifyAuth = await refreshAccessToken(spotifyAuth?.refreshToken);\n  }\n\n  return spotifyAuth;\n}\n\nexport default function useSpotifyAuth(): boolean {\n  const [authenticated, setAuthenticated] = useState(false);\n\n  useEffect(() => {\n    const authFromQueryString = getAuthFromQueryString();\n    if (authFromQueryString) {\n      setAuthLocalStorage(authFromQueryString);\n      window.location.href = '/';\n    }\n  }, []);\n\n  const authFromLocalStorage = getAuthFromLocalStorage();\n  useEffect(() => {\n\n    if (authFromLocalStorage) {\n      if (hasTokenExpired(authFromLocalStorage)) {\n        setAuthenticated(false);\n        (async function() {\n          await refreshAccessToken(authFromLocalStorage.refreshToken);\n          setAuthenticated(true);\n        })();\n      } else {\n        setAuthenticated(true);\n      }\n\n    } else {\n      redirectToLogin();\n    }\n\n  }, [authFromLocalStorage]);\n  \n  return authenticated;\n}\n","\nexport enum SpotifyAction {\n  PausePlayback,\n  ResumePlayback,\n  SkipNext,\n  SkipPrevious,\n  ShuffleOn,\n  ShuffleOff,\n  RepeatOnContext,\n  RepeatOnTrack,\n  RepeatOff,\n};\n\nexport enum PlaybackState {\n  Playing = 'playing',\n  Paused = 'paused',\n  InActive = 'inactive',\n};\n\nexport enum ShuffleState {\n  On = 'on',\n  Off = 'off',\n};\n\nexport enum RepeatState {\n  Off = 'off',\n  Context = 'context',\n  Track = 'track',\n};\n\nexport enum PlaybackType {\n  Track = 'track',\n  Episode = 'episode',\n};\n\nexport enum PlaybackDirection {\n  Forward = 'forward',\n  Back = 'back',\n};\n\nexport enum PlayingContext {\n  Playlist = 'playlist',\n  Album = 'album',\n  Show = 'show',\n};\n","import axios, { AxiosResponse } from 'axios';\nimport { getAuth } from 'services/spotify-auth';\n\ninterface ApiOptions {\n  headers?: {\n    [key: string]: string;\n  };\n}\n\nexport type ApiResponse = AxiosResponse;\n\nexport interface ApiError {\n  code: string;\n  message: string;\n};\n\nexport function handleApiError(error: any): void {\n  // TODO: handle API errors\n}\n\nexport const get = (url: string): Promise<ApiResponse> => {\n  return new Promise(async (resolve, reject) => {\n\n    try {\n      let options: ApiOptions = {};\n      const { accessToken } = await getAuth() || {};\n      if (!accessToken) return reject('Spotify not authenticated');\n      options.headers = { Authorization: `Bearer ${accessToken}` };\n\n      const apiResult = await axios.get(url, options);\n\n      return resolve(apiResult);\n    } catch (error) {\n      handleApiError(error);\n      return reject(error);\n    }\n\n  });\n};\n\nexport const post = (url: string, postData: any): Promise<ApiResponse> => {\n  return new Promise(async (resolve, reject) => {\n\n    try {\n      let options: ApiOptions = {};\n      const { accessToken } = await getAuth() || {};\n      if (!accessToken) return reject('Spotify not authenticated');\n      options.headers = { Authorization: `Bearer ${accessToken}` };\n\n      const apiResult = await axios.post(url, postData, options);\n\n      return resolve(apiResult.data);\n    } catch (error) {\n      handleApiError(error);\n      return reject(error);\n    }\n\n  });\n};\n\nexport const put = (url: string, putData: any): Promise<ApiResponse> => {\n  return new Promise(async (resolve, reject) => {\n\n    try {\n      let options: ApiOptions = {};\n      const { accessToken } = await getAuth() || {};\n      if (!accessToken) return reject('Spotify not authenticated');\n      options.headers = { Authorization: `Bearer ${accessToken}` };\n\n      const apiResult = await axios.put(url, putData, options);\n\n      return resolve(apiResult.data);\n    } catch (error) {\n      handleApiError(error);\n      return reject(error);\n    }\n\n  });\n};\n\nconst spotifyApi = {\n  get,\n  post,\n  put,\n}\n\nexport default spotifyApi;\n","import spotifyApi, { ApiResponse } from '../../';\n\nexport default async function getCurrentlyPlaying(): Promise<ApiResponse> {\n  const response = await spotifyApi.get('https://api.spotify.com/v1/me/player?additional_types=track,episode');\n  return response.data;\n}\n","import { Artist } from \"types\";\n\nexport default function digestArtists(artistsData: any[]): Artist[] {\n  const artists: Artist[] = artistsData.map((artist): Artist => {\n    const { uri, href, name } = artist;\n    return {\n      uri,\n      href,\n      name,\n    };\n  });\n  return artists;\n}\n","import { Image } from \"types\";\n\nexport default function digestImages(imagesArray: any[]) : Image[] {\n  const images: Image[] = imagesArray.map((image): Image => ({ ...image }));\n  return images;\n}\n","import get from 'lodash/get';\nimport { CurrentlyPlaying, Track, Album, Episode, Show } from 'types';\nimport { PlaybackType } from 'enums';\nimport digestPlayback from './digestPlayback';\nimport digestTrack from './digestTrack';\nimport digestAlbum from './digestAlbum';\nimport digestEpisode from './digestEpisode';\nimport digestShow from './digestShow';\nimport digestContext from './digestContext';\n\nexport default function digestCurrentlyPlaying(data: any) : CurrentlyPlaying {\n\n  const type = get(data, 'currently_playing_type', null);\n\n  const playback = digestPlayback(data, type);\n\n  let track: Track | null = null;\n  let album: Album | null = null;\n  if (type === PlaybackType.Track) {\n    album = digestAlbum(get(data, 'item.album'));\n    track = digestTrack(get(data, 'item'), album && album.name);\n  }\n\n  let episode: Episode | null = null;\n  let show: Show | null = null;\n  if (type === PlaybackType.Episode) {\n    show = digestShow(get(data, 'item.show'));\n    episode = digestEpisode(get(data, 'item'), show && show.name);\n  }\n\n  const context = digestContext(get(data, 'context'));\n\n  const currentlyPlaying: CurrentlyPlaying = {\n    type,\n    playback,\n    track,\n    album,\n    episode,\n    show,\n    context,\n  };\n\n  return currentlyPlaying;\n}\n","import get from 'lodash/get';\nimport { Playback } from \"types\";\nimport { PlaybackType, PlaybackState, ShuffleState, RepeatState } from \"enums\";\nimport digestDevice from './digestDevice';\n\nexport default function digestPlayback(playbackData: any, type: PlaybackType) : Playback | null {\n\n  const isPlaying = get(playbackData, 'is_playing', null);\n  const currentMs = get(playbackData, 'progress_ms', 0);\n  const durationMs = get(playbackData, 'item.duration_ms', 0);\n  const remainingMs = durationMs - currentMs;\n  const shuffleState = get(playbackData, 'shuffle_state', false);\n  const repeat = get(playbackData, 'repeat_state', false) as RepeatState;\n  const device = digestDevice(get(playbackData, 'device', null));\n\n  let state = PlaybackState.InActive;\n  if (isPlaying !== null) {\n    state = isPlaying ? PlaybackState.Playing : PlaybackState.Paused;\n  }\n\n  const shuffle = shuffleState ? ShuffleState.On : ShuffleState.Off;\n\n  const playback: Playback = {\n    state,\n    shuffle,\n    current: Math.round(currentMs / 1000),\n    duration: Math.round(durationMs / 1000),\n    remaining: Math.round(remainingMs / 1000),\n    type,\n    repeat,\n    device,\n  };\n\n  return playback;\n}\n","import { Device } from \"types\";\n\nexport default function digestDevice(deviceData: any) : Device | null {\n  if (!deviceData) return null;\n\n  const {\n    id,\n    name,\n    type,\n    is_active: active,\n    volume_percent: volume,\n  } = deviceData;\n\n  const device: Device = {\n    id,\n    name,\n    type,\n    active,\n    volume,\n  };\n\n  return device;\n}\n","import { Album } from \"types\";\nimport digestArtists from './digestArtists';\nimport digestImages from './digestImages';\n\nexport default function digestAlbum(albumData: any) : Album | null {\n  if (!albumData) return null;\n\n  const {\n    uri,\n    href,\n    name,\n  } = albumData;\n\n  const artists = digestArtists(albumData.artists);\n  const artist = artists.map(artist => artist.name).join(', ');\n  const images = digestImages(albumData.images);\n\n  const album: Album = {\n    uri,\n    href,\n    name,\n    artist,\n    artists,\n    image: images[0],\n  };\n\n  return album;\n}\n","import { Track } from \"types\";\nimport digestArtists from './digestArtists';\n\nexport default function digestTrack(trackData: any, album: string | null) : Track | null {\n  if (!trackData) return null;\n\n  const {\n    uri,\n    href,\n    name,\n    track_number: trackNumber,\n    duration_ms: duration,\n  } = trackData;\n\n  const artists = digestArtists(trackData.artists);\n  const artist = artists.map(artist => artist.name).join(', ');\n\n  const track: Track = {\n    uri,\n    href,\n    name,\n    artist,\n    artists,\n    trackNumber,\n    duration,\n    album: album || '',\n  };\n\n  return track;\n}\n","import { Show } from \"types\";\nimport digestImages from './digestImages';\n\nexport default function digestShow(showData: any) : Show | null {\n  if (!showData) return null;\n\n  const {\n    uri,\n    href,\n    name,\n    description,\n    publisher,\n  } = showData;\n\n  const images = digestImages(showData.images);\n\n  const show: Show = {\n    uri,\n    href,\n    name,\n    description,\n    publisher,\n    image: images[0],\n  };\n\n  return show;\n}\n","import { Context } from \"types\";\n\nexport default function digestContext(contextData: any) : Context | null {\n  if (!contextData) return null;\n  \n  const {\n    uri,\n    href,\n    type,\n  } = contextData;\n\n  const context: Context = {\n    uri,\n    href,\n    type,\n  };\n\n  return context;\n}\n","import { Episode } from \"types\";\n\nexport default function digestEpisode(episodeData: any, show: string | null) : Episode | null {\n  if (!episodeData) return null;\n\n  const {\n    uri,\n    href,\n    name,\n    description,\n    duration_ms: duration,\n  } = episodeData;\n\n  const episode: Episode = {\n    uri,\n    href,\n    name,\n    description,\n    duration,\n    show: show || '',\n  };\n\n  return episode;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\ninterface StyleProps {\n  fontSize: string;\n  fontWeight: number;\n};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif;',\n    fontSize: props => props.fontSize,\n    fontWeight: props => props.fontWeight,\n    lineHeight: 1.235,\n    letterSpacing: '0.00735em',\n  },\n});\n\nfunction calculateFontSize(size: number | undefined, scaled: 'vw' | 'vh' | false = false): string {\n  const base = 16;\n  size = size ? size : base;\n\n  if (scaled) {\n    const target = scaled === 'vw' ? 1024 : 768;\n    return `${((size / target) * 100)}${scaled}`;\n  }\n\n  return `${size / base}rem`;\n}\n\ninterface TypographyProps {\n  children: React.ReactNode;\n  className?: string; \n  scaled?: 'vw' | 'vh' | false;\n  size?: number;\n  weight?: 'light' | 'regular' | 'medium' | 'bold';\n  component?: 'span' | 'div' | 'p' | 'ul' | 'ol' | 'li';\n};\n\nconst Typography: React.FunctionComponent<TypographyProps> = (props) => {\n  const {\n    children,\n    className,\n    scaled,\n    size,\n    weight = 'regular',\n    component = 'span',\n  } = props;\n\n  const fontSize = calculateFontSize(size, scaled);\n  let fontWeight: number;\n  switch (weight) {\n    case 'light': fontWeight = 300; break;\n    case 'regular': default: fontWeight = 400; break;\n    case 'medium': fontWeight = 500; break;\n    case 'bold': fontWeight = 700; break;\n  }\n  const classes = useStyles({ fontSize, fontWeight });\n\n  const Wrapper = component;\n  return (\n    <Wrapper className={clsx(classes.root, className && className)}>\n      {children}\n    </Wrapper>\n  );\n};\n\nexport default Typography;\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Drawer, DrawerProps } from '@material-ui/core';\n\nconst useStyles = makeStyles<Theme, { paperOpacity: number}>({\n  paper: {\n    backgroundColor: props => `rgba(0, 0, 0, ${props.paperOpacity})`,\n    color: '#fff',\n    boxShadow: 'none',\n    border: 'none',\n    transition: '0.8s transform cubic-bezier(.25, .25, 0, 1) !important',\n    overflowY: 'visible',\n  },\n  drawerInner: {\n    display: 'flex',\n    alignItems: 'center',\n    height: 80,\n  },\n});\n\ninterface CustomDrawerProps {\n  paperOpacity?: number;\n}\n\nconst CustomDrawer: React.FunctionComponent<DrawerProps & CustomDrawerProps> = (props) => {\n  const { paperOpacity = 1, ...drawerProps } = props;\n  const classes = useStyles({ paperOpacity });\n  return (\n    <Drawer\n      {...drawerProps}\n      variant=\"persistent\"\n      classes={{ paper: classes.paper }}\n      ModalProps={{ hideBackdrop: true }}\n      transitionDuration={800}\n    >\n      <div className={classes.drawerInner}>\n        {props.children}\n      </div>\n    </Drawer>\n  );\n};\n\nexport default CustomDrawer;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CustomDrawer from 'components/CustomDrawer';\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    zIndex: 999,\n  },\n  left: {\n    marginRight: 'auto',\n  },\n  right: {\n    marginLeft: 'auto',\n  },\n  logo: {\n    position: 'absolute',\n    top: 20,\n    left: 'calc(50% - 20px)',\n    width: 40,\n    height: 40,\n    margin: '0 auto',\n    '& svg': {\n      width: 40,\n      height: 40,\n    }\n  },\n});\n\ninterface TopBarProps {\n  left?: React.ReactNode;\n  right?: React.ReactNode;\n  logo?: React.ReactNode;\n};\n\nconst TopBar: React.FunctionComponent<TopBarProps> = (props) => {\n  const { left, right, logo } = props;\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CustomDrawer anchor=\"top\" open={true} paperOpacity={0.99}>\n        {left && <div className={classes.left}>{left}</div>}\n        {logo && <div className={classes.logo}>{logo}</div>}\n        {right && <div className={classes.right}>{right}</div>}\n      </CustomDrawer>\n    </div>\n  );\n};\n\nexport default TopBar;\n","import React from 'react';\n\nconst SpotifyLogo: React.FunctionComponent = () => {\n  return (\n    <svg viewBox=\"0 0 512 512\">\n      <circle style={{ fill: '#50B95D' }} cx=\"256\" cy=\"256\" r=\"256\" />\n      <path style={{ fill: '#20A83E' }} d=\"M34.133,256c0-135.648,105.508-246.636,238.933-255.42C267.424,0.208,261.737,0,256,0\n        C114.615,0,0,114.615,0,256s114.615,256,256,256c5.737,0,11.424-0.208,17.067-0.58C139.642,502.636,34.133,391.648,34.133,256z\"/>\n      <path style={{ fill: '#FFFFFF' }} d=\"M358.23,335.212L358.23,335.212c-48.438-21.419-100.06-32.278-153.43-32.278\n        c-31.435,0-62.695,3.854-92.913,11.454c-11.408,2.869-18.355,14.485-15.485,25.893c2.869,11.406,14.483,18.353,25.893,15.485\n        c26.816-6.746,54.575-10.165,82.506-10.165c47.392,0,93.207,9.634,136.176,28.635c8.213,3.631,18.391,1.478,24.423-5.178\n        c5.613-6.194,6.945-15.57,3.569-23.173C366.867,341.153,362.961,337.303,358.23,335.212z\"/>\n      <path style={{ fill: '#FFFFFF' }} d=\"M386.652,259.147c-57.538-24.737-118.722-37.28-181.852-37.28c-31.25,0-62.486,3.15-92.839,9.361\n        c-13.662,2.796-22.749,16.529-19.949,30.212c2.829,13.822,16.377,22.777,30.212,19.948c26.986-5.521,54.768-8.321,82.576-8.321\n        c56.134,0,110.515,11.142,161.63,33.118c9.554,4.107,21.119,1.799,28.405-5.61c7.328-7.452,9.173-19.09,4.917-28.574\n        C397.177,266.262,392.429,261.631,386.652,259.147z\"/>\n      <path style={{ fill: '#FFFFFF' }} d=\"M444.853,196.524c-2.849-7.452-8.429-13.348-15.712-16.603\n        C358.38,148.3,282.901,132.267,204.8,132.267c-36.37,0-72.745,3.573-108.113,10.621c-11.318,2.255-20.645,11.296-23.27,22.532\n        c-2.902,12.42,2.736,25.532,13.526,32.211c6.365,3.94,14.074,5.305,21.417,3.838C139.894,195.186,172.341,192,204.8,192\n        c69.648,0,136.928,14.285,199.971,42.457c8.618,3.852,18.891,3.334,27.07-1.381c7.268-4.191,12.572-11.468,14.337-19.669\n        C447.383,207.802,446.899,201.874,444.853,196.524z\"/>\n    </svg>\n  );\n};\n\nexport default SpotifyLogo;\n","import spotifyApi, { ApiResponse } from '../../';\n\nexport default async function getCurrentUser(): Promise<ApiResponse> {\n  const response = await spotifyApi.get('https://api.spotify.com/v1/me');\n  return response.data;\n}\n","import { useQuery } from 'react-query';\nimport { User } from 'types';\nimport getCurrentUser from '../resources/user/getCurrentUser';\nimport digestUser from '../utils/digestUser';\n\nexport default function useCurrentUser(): User | null {\n  const response = useQuery('currentUser', () => getCurrentUser());\n  const { data } = response;\n  return digestUser(data);\n}","import { User } from 'types';\nimport digestImages from './digestImages';\n\nexport default function digestUser(userData: any) : User | null {\n  if (!userData) return null;\n\n  const {\n    uri,\n    href,\n    display_name: displayName,\n  } = userData;\n\n  const images = digestImages(userData.images);\n  const initials: string = displayName ? displayName.split(' ').map((n: string) => n[0]).join('').toUpperCase() : '';\n\n  const user: User = {\n    uri,\n    href,\n    displayName,\n    initials,\n    image: images[0],\n  };\n\n  return user;\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Avatar } from '@material-ui/core';\nimport Typography from 'components/Typography';\nimport useCurrentUser from 'services/spotify-api/queries/useCurrentUser';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(2),\n  },\n  name: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst PlaybackUser: React.FunctionComponent = () => {\n  const classes = useStyles();\n  const currentUser = useCurrentUser();\n  if (!currentUser) return null;\n\n  const { displayName, initials, image } = currentUser;\n\n  return (\n    <div className={classes.root}>\n      <Typography size={16} component=\"div\" className={classes.name}>{displayName}</Typography>\n      <Avatar alt={displayName} src={image.url}>{initials}</Avatar>\n    </div>\n  );\n};\n\nexport default PlaybackUser;\n","\nexport type PreloadedImage = {\n  loaded: boolean;\n  width: number;\n  height: number;\n};\n\nexport default async function preLoadImage(url: string): Promise<PreloadedImage> {\n  return new Promise(async (resolve, reject) => {\n\n    try {\n\n      const preloadImageContainer = document.createElement('div');\n      preloadImageContainer.setAttribute('style', `\n        position: absolute;\n        width: 0;\n        height: 0;\n        overflow: hidden;\n        background-color: red;\n      `);\n\n      const imageElement = document.createElement('img');\n      imageElement.setAttribute('src', url);\n      imageElement.addEventListener('load', e => {\n\n        const image: PreloadedImage = {\n          loaded: true,\n          width: imageElement.clientWidth,\n          height: imageElement.clientHeight,\n        };\n\n        preloadImageContainer.parentElement!.removeChild(preloadImageContainer);\n\n        resolve(image);\n      });\n\n      preloadImageContainer.appendChild(imageElement);\n      document.body.appendChild(preloadImageContainer);\n\n    } catch (error) {\n      reject(error);\n    }\n\n  });\n}","import React, { useState, useEffect } from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport preLoadImage from 'utils/preloadImage';\n\ninterface StyleProps {\n  width?: string;\n  height?: string;\n  backgroundImage?: string;\n  backgroundColor?: string;\n  backgroundRepeat?: string;\n  backgroundPosition?: string;\n  backgroundSize?: string;\n  duration: number;\n};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    width: props => props.width ? props.width : '100%',\n    height: props => props.height ? props.height : '100%',\n    backgroundColor: props => props.backgroundColor ? props.backgroundColor : 'transparent',\n    transition: props => `${props.duration}ms background-color ease`,\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    backgroundImage: props => props.backgroundImage ? props.backgroundImage : 'none',\n    backgroundRepeat: props => props.backgroundRepeat ? props.backgroundRepeat : 'no-repeat',\n    backgroundPosition: props => props.backgroundPosition ? props.backgroundPosition : 'center center',\n    backgroundSize: props => props.backgroundSize ? props.backgroundSize : 'cover',\n    transition: props => `${props.duration}ms background-image ease, ${props.duration}ms opacity ease`,\n  },\n});\n\ninterface CrossfadeImageProps {\n  imageUrl: string;\n  width?: number;\n  height?: number;\n  backgroundImage?: string;\n  backgroundColor?: string;\n  backgroundRepeat?: string;\n  backgroundPosition?: string;\n  backgroundSize?: string;\n  duration?: number;\n  className?: string;\n};\n\nconst CrossfadeImage: React.FunctionComponent<CrossfadeImageProps> = (props) => {\n  const { imageUrl, duration = 1000, className } = props;\n  const classes = useStyles({ ...props, duration } as StyleProps);\n  const [hasImage, setHasImage] = useState<boolean>(false);\n  const [imageSrc, setImageSrc] = useState<string>('');\n\n  useEffect(() => {\n\n    const setImage = (imageUrl: string): void => {\n      setImageSrc(imageUrl);\n      setHasImage(true);\n    };\n\n    if (imageSrc !== imageUrl || !hasImage) {\n      if (imageUrl !== '') {\n        preLoadImage(imageUrl).then(image => {\n          setImage(imageUrl);\n        });\n      } else {\n        setHasImage(false);\n        setTimeout(() => setImageSrc('none'), duration);\n      }\n    }\n\n  }, [imageUrl, hasImage, imageSrc, duration]);\n\n  const opacity = hasImage ? 1 : 0;\n  const backgroundImage = imageSrc ? `url(${imageSrc})` : (props.backgroundImage ? `url(${props.backgroundImage}` : 'none');\n\n  return (\n    <div className={clsx(classes.root, className && className)}>\n      <div className={classes.image} style={{ backgroundImage, opacity }}></div>\n    </div>\n  );\n};\n\nexport default CrossfadeImage;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Album, Show } from 'types';\nimport CrossfadeImage from 'components/CrossfadeImage';\n\ninterface StyleProps {};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  fill: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n  },\n  root: {\n    zIndex: 0,\n    userSelect: 'none',\n    overflow: 'hidden',\n  },\n  overlay: {\n    backdropFilter: 'blur(20px)',\n    backgroundColor: 'rgba(0, 0, 0, 0.33)',\n    zIndex: 2,\n  },\n  image: {\n    zIndex: 1,\n    transform: 'scale(1.2)',\n    transition: '1.25s transform cubic-bezier(.25, .25, 0, 1)',\n  },\n});\n\ninterface PlaybackBackdropProps {\n  item: Album | Show | null;\n};\n\nconst PlaybackBackdrop: React.FunctionComponent<PlaybackBackdropProps> = (props) => {\n  const { item } = props;\n  const classes = useStyles({});\n\n  return (\n    <div className={clsx(classes.root, classes.fill)}>\n      <div className={clsx(classes.overlay, classes.fill)}></div>\n      <div className={clsx(classes.image, classes.fill)}>\n        <CrossfadeImage imageUrl={item ? item.image.url : ''} backgroundColor=\"#000\" />\n      </div>\n    </div>\n  );\n};\n\nexport default PlaybackBackdrop;\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\nexport type Align = 'left' | 'right' | 'center';\nexport type Size = 'small' | 'medium' | 'large' | 'x-large';\n\ninterface StyleProps {\n  align?: Align;\n  size?: Size;\n  active?: boolean;\n};\n\nfunction alignment(align: Align): string {\n  switch (align) {\n    case 'left': return 'flex-start';\n    case 'right': return 'flex-end';\n    case 'center': default: return 'center';\n  }\n}\n\nfunction size(size: Size): number {\n  switch (size) {\n    case 'small': return 20;\n    case 'medium': default: return 40;\n    case 'large': return 50;\n    case 'x-large': return 80;\n  }\n}\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: props => props.align ? alignment(props.align) : 'center',\n  },\n  button: {\n    position: 'relative',\n    width: props => props.size ? size(props.size) : 40,\n    height: props => props.size ? size(props.size) : 40,\n    marginLeft: 20,\n    marginRight: 20,\n    padding: 0,\n    appearance: 'none',\n    background: 'none',\n    border: 'none',\n    cursor: 'pointer',\n    '&:active, &:focus': {\n      outline: 0,\n    },\n  },\n  icon: {\n    '& > svg': {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: props => props.size ? size(props.size) : 40,\n      height: props => props.size ? size(props.size) : 40,\n      '& path': {\n        fill: props => props.active ? '#50B95D' : '#fff',\n        transition: `0.3s fill ease`,\n      },\n    }\n  }\n});\n\ninterface ControlButtonProps {\n  size?: Size;\n  active?: boolean;\n  onClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n};\n\nexport const ControlButton: React.FunctionComponent<ControlButtonProps> = (props) => {\n  const { children, size, active, onClick } = props;\n  const classes = useStyles({ size, active });\n  return (\n    <button className={classes.button} onClick={onClick ? onClick : undefined}>\n      <div className={classes.icon}>\n        {children}\n      </div>\n    </button>\n  );\n};\n\ninterface ControlButtonGroupProps {\n  children: React.ReactNode;\n  align?: Align;\n};\n\nexport const ControlButtonGroup: React.FunctionComponent<ControlButtonGroupProps> = (props) => {\n  const { align = 'center' } = props;\n  const classes = useStyles({ align });\n  return (\n    <div className={classes.root}>\n      {props.children}\n    </div>\n  );\n};\n","import spotifyApi, { ApiResponse } from '../..';\n\nexport default async function play(): Promise<ApiResponse> {\n  const response = await spotifyApi.put('https://api.spotify.com/v1/me/player/play', {});\n  return response.data;\n}\n","import spotifyApi, { ApiResponse } from '../..';\n\nexport default async function pause(): Promise<ApiResponse> {\n  const response = await spotifyApi.put('https://api.spotify.com/v1/me/player/pause', {});\n  return response.data;\n}\n","import React from 'react';\nimport play from 'services/spotify-api/resources/player/play';\nimport pause from 'services/spotify-api/resources/player/pause';\nimport { PlaybackState } from 'enums';\nimport { ControlButton } from 'components/ControlButtons';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\n\ninterface PlayPauseButtonProps {\n  playbackState: PlaybackState\n};\n\nconst PlayPauseButton: React.FunctionComponent<PlayPauseButtonProps> = (props) => {\n  const { playbackState } = props;\n\n  const handleClick = () => {\n    if (playbackState === PlaybackState.Paused) play();\n    if (playbackState === PlaybackState.Playing) pause();\n  };\n\n  return (\n    <ControlButton size=\"x-large\" onClick={handleClick}>\n      {playbackState === PlaybackState.Playing && <PauseIcon />}\n      {playbackState === PlaybackState.Paused && <PlayArrowIcon />}\n    </ControlButton>\n  );\n};\n\nexport default PlayPauseButton;\n","import spotifyApi, { ApiResponse } from '../..';\n\nexport default async function next(): Promise<ApiResponse> {\n  const response = await spotifyApi.post('https://api.spotify.com/v1/me/player/next', {});\n  return response.data;\n}\n","import spotifyApi, { ApiResponse } from '../..';\n\nexport default async function previous(): Promise<ApiResponse> {\n  const response = await spotifyApi.post('https://api.spotify.com/v1/me/player/previous', {});\n  return response.data;\n}\n","import spotifyApi, { ApiResponse } from '../..';\n\nexport default async function seek(positionMs: number): Promise<ApiResponse> {\n  const response = await spotifyApi.put(`https://api.spotify.com/v1/me/player/seek?position_ms=${positionMs}`, {});\n  return response.data;\n}\n","import React from 'react';\nimport next from 'services/spotify-api/resources/player/next';\nimport previous from 'services/spotify-api/resources/player/previous';\nimport seek from 'services/spotify-api/resources/player/seek';\nimport { Playback } from 'types';\nimport { PlaybackType, PlaybackDirection } from 'enums';\nimport { ControlButton } from 'components/ControlButtons';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport Replay30Icon from '@material-ui/icons/Replay30';\nimport Forward30Icon from '@material-ui/icons/Forward30';\n\ninterface SkipButtonProps {\n  playback: Playback;\n  direction: PlaybackDirection;\n};\n\nconst SkipButton: React.FunctionComponent<SkipButtonProps> = (props) => {\n  const { playback, direction } = props;\n  const { type: playbackType } = playback;\n\n  const handleClick = () => {\n    if (playbackType === PlaybackType.Track) {\n      if (direction === PlaybackDirection.Forward) next();\n      if (direction === PlaybackDirection.Back) previous();\n    }\n    if (playbackType === PlaybackType.Episode) {\n      if (direction === PlaybackDirection.Forward) {\n        const newPositionMs = (playback.current + 30) * 1000;\n        seek(newPositionMs);\n      };\n      if (direction === PlaybackDirection.Back) {\n        const newPositionMs = (playback.current - 30) * 1000;\n        seek(newPositionMs);\n      };\n    }\n  };\n\n  return (\n    <ControlButton size=\"large\" onClick={handleClick}>\n      {direction === PlaybackDirection.Back && (\n        <>\n          {playbackType === PlaybackType.Track && <SkipPreviousIcon />}\n          {playbackType === PlaybackType.Episode && <Replay30Icon />}\n        </>\n      )}\n      {direction === PlaybackDirection.Forward && (\n        <>\n          {playbackType === PlaybackType.Track && <SkipNextIcon />}\n          {playbackType === PlaybackType.Episode && <Forward30Icon />}\n        </>\n      )}\n    </ControlButton>\n  );\n};\n\nexport default SkipButton;\n","import spotifyApi, { ApiResponse } from '../..';\n\nexport default async function shuffle(shuffleState: boolean): Promise<ApiResponse> {\n  const response = await spotifyApi.put(`https://api.spotify.com/v1/me/player/shuffle?state=${String(shuffleState)}`, {});\n  return response.data;\n}\n","import React from 'react';\nimport shuffle from 'services/spotify-api/resources/player/shuffle';\nimport { ShuffleState } from 'enums';\nimport { ControlButton } from 'components/ControlButtons';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\n\ninterface ShuffleButtonProps {\n  shuffleState: ShuffleState;\n};\n\nconst ShuffleButton: React.FunctionComponent<ShuffleButtonProps> = (props) => {\n  const { shuffleState } = props;\n\n  const handleClick = () => {\n    const shuffleOn = shuffleState === ShuffleState.On;\n    shuffle(!shuffleOn);\n  };\n\n  return (\n    <ControlButton active={shuffleState === ShuffleState.On} onClick={handleClick}>\n      <ShuffleIcon />\n    </ControlButton>\n  );\n}\n\nexport default ShuffleButton;\n","import spotifyApi, { ApiResponse } from '../..';\nimport { RepeatState } from 'enums';\n\nexport default async function repeat(repeatState: RepeatState): Promise<ApiResponse> {\n  const response = await spotifyApi.put(`https://api.spotify.com/v1/me/player/repeat?state=${repeatState}`, {});\n  return response.data;\n}\n","import React from 'react';\nimport repeat from 'services/spotify-api/resources/player/repeat';\nimport { RepeatState } from 'enums';\nimport { ControlButton } from 'components/ControlButtons';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\n\ninterface RepeatButtonProps {\n  repeatState: RepeatState\n};\n\nconst RepeatButton: React.FunctionComponent<RepeatButtonProps> = (props) => {\n  const { repeatState } = props;\n\n  let repeatActive = repeatState !== RepeatState.Off;\n\n  const handleClick = () => {\n    let nextRepeatState: RepeatState;\n    switch (repeatState) {\n      default:\n      case RepeatState.Off:\n        nextRepeatState = RepeatState.Context;\n        break;\n      case RepeatState.Context:\n        nextRepeatState = RepeatState.Track;\n        break;\n      case RepeatState.Track:\n        nextRepeatState = RepeatState.Off;\n        break;\n    }\n    repeat(nextRepeatState);\n  };\n\n  return (\n    <ControlButton active={repeatActive} onClick={handleClick}>\n      {repeatState === RepeatState.Off && <RepeatIcon />}\n      {repeatState === RepeatState.Context && <RepeatIcon />}\n      {repeatState === RepeatState.Track && <RepeatOneIcon />}\n    </ControlButton>\n  );\n};\n\nexport default RepeatButton;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Playback } from 'types';\nimport { ControlButtonGroup } from 'components/ControlButtons';\nimport PlayPauseButton from './PlayPauseButton';\nimport SkipButton from './SkipButton';\nimport ShuffleButton from './ShuffleButton';\nimport RepeatButton from './RepeatButton';\nimport { PlaybackType, PlaybackDirection } from 'enums';\n\nconst useStyles = makeStyles({\n  playbackControls: {\n    width: '100%',\n    height: 80,\n  },\n});\n\ninterface PlaybackControlsProps {\n  playback: Playback;\n};\n\nconst PlaybackControls: React.FunctionComponent<PlaybackControlsProps> = (props) => {\n  const classes = useStyles();\n  const { playback } = props;\n\n  return (\n    <div className={classes.playbackControls}>\n      <ControlButtonGroup>\n        {playback.type === PlaybackType.Track && (\n          <ShuffleButton shuffleState={playback.shuffle} />\n        )}\n        <SkipButton playback={playback} direction={PlaybackDirection.Back} />\n        <PlayPauseButton playbackState={playback.state} />\n        <SkipButton playback={playback} direction={PlaybackDirection.Forward} />\n        {playback.type === PlaybackType.Track && (\n          <RepeatButton repeatState={playback.repeat} />\n        )}\n      </ControlButtonGroup>\n    </div>\n  );\n};\n\nexport default PlaybackControls;\n","\nexport default function timeString(totalSeconds: number): string {\n  const minutes = Math.floor(totalSeconds / 60);\n  const seconds = totalSeconds - (minutes * 60);\n  return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n};\n","import React from 'react';\nimport { makeStyles, withStyles, Theme } from '@material-ui/core/styles';\nimport { LinearProgress, Typography } from '@material-ui/core';\nimport { Playback } from 'types';\nimport { PlaybackState } from 'enums';\nimport timeString from 'utils/timeString';\n\ninterface StyleProps {\n  playbackState?: PlaybackState;\n};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    width: '100%',\n    height: 80,\n    textAlign: 'right',\n    paddingRight: 16,\n    userSelect: 'none',\n  },\n  playbackProgressCurrent: {\n    fontWeight: 500,\n  },\n  playbackProgressPaused: {\n    display: 'inline-block',\n    opacity: props => props.playbackState ? (props.playbackState === PlaybackState.Paused ? 0.5 : 0) : 0,\n    marginRight: 10,\n    transition: '0.3s opacity ease',\n  },\n  playbackProgressTotal: {\n    opacity: 0.5,\n  },\n  playbackProgressBar: {\n    position: 'absolute',\n    top: -4,\n    left: 0,\n    width: '100%',\n    height: 4,\n  }\n});\n\nconst PlaybackProgressBar = withStyles({\n  root: {\n    height: 4,\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n  },\n  bar: {\n    backgroundColor: '#fff',\n    transition: 'transform 0s linear' // times returned from API too inconsistent to have nice smooth transtions\n  },\n})(LinearProgress);\n\ninterface PlaybackProgressProps {\n  playback: Playback;\n};\n\nconst PlaybackProgress: React.FunctionComponent<PlaybackProgressProps> = (props) => {\n  const { playback } = props;\n  const classes = useStyles({ playbackState: playback.state });\n  const { duration, current, remaining } = playback;\n\n  const currentPercentage = (current / duration) * 100;\n\n  return (\n    <React.Fragment>\n      <PlaybackProgressBar className={classes.playbackProgressBar} variant=\"determinate\" value={currentPercentage} />\n      <div className={classes.root}>\n        <Typography variant=\"h5\" component=\"div\" className={classes.playbackProgressCurrent}>\n          <span className={classes.playbackProgressPaused}>Paused</span>\n          {timeString(current)}\n        </Typography>\n        <Typography variant=\"subtitle1\" component=\"div\" className={classes.playbackProgressTotal}>\n          -{timeString(remaining)} / {timeString(duration)}\n        </Typography>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default PlaybackProgress;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Playback } from 'types';\nimport { PlaybackState } from 'enums';\nimport CustomDrawer from 'components/CustomDrawer';\nimport PlaybackControls from './PlaybackControls';\nimport PlaybackProgress from './PlaybackProgress';\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    zIndex: 999,\n  },\n  playbackControls: {\n    width: '58.59375vh',\n    marginLeft: 50,\n  },\n  playbackProgress: {\n    marginLeft: 'auto',\n  },\n});\n\ninterface PlaybackBarProps {\n  playback: Playback | null;\n};\n\nconst PlaybackBar: React.FunctionComponent<PlaybackBarProps> = (props) => {\n  const { playback } = props;\n  const classes = useStyles();\n  if (!playback) return null;\n\n  const showPlaybackBar = (playback.state === PlaybackState.Playing || playback.state === PlaybackState.Paused);\n\n  return (\n    <div className={classes.root}>\n      <CustomDrawer anchor=\"bottom\" open={showPlaybackBar} paperOpacity={0.5}>\n        <div className={classes.playbackControls}>\n          <PlaybackControls playback={playback} />\n        </div>\n        <div className={classes.playbackProgress}>\n          <PlaybackProgress playback={playback} />\n        </div>\n      </CustomDrawer>\n    </div>\n  );\n};\n\nexport default PlaybackBar;\n","\nexport default function getSpotifyIdFromUri(uri: string | null): string | null {\n  const validUri = uri ? /^spotify:[a-zA-Z]+:[a-zA-Z0-9]+$/.test(uri) : false;\n  if (!uri || !validUri) return null;\n  const [,, spotifyId] = uri.split(':');\n  return spotifyId;\n}\n","import spotifyApi, { ApiResponse } from '../..';\nimport getSpotifyIdFromUri from '../../utils/getSpotifyIdFromUri';\n\nexport default async function getPlaylist(playlistUri: string | null): Promise<ApiResponse> {\n  const playlistId = getSpotifyIdFromUri(playlistUri);\n  if (!playlistId) throw new Error('Invaid playlist URI');\n  const response = await spotifyApi.get(`https://api.spotify.com/v1/playlists/${playlistId}`);\n  return response.data;\n}\n","import { useQuery } from 'react-query';\nimport { Playlist } from 'types';\nimport getPlaylist from '../resources/playlists/getPlaylist';\nimport digestPlaylist from '../utils/digestPlaylist';\n\nexport default function usePlaylist(playlistUri: string | null): Playlist | null {\n  const response = useQuery(['playlist', playlistUri], () => getPlaylist(playlistUri));\n  const { data } = response;\n  if (data) {\n    return digestPlaylist(data);\n  }\n  return null;\n}","import { Playlist } from \"types\";\nimport digestImages from './digestImages';\n\nexport default function digestPlaylist(playlistData: any) : Playlist {\n\n  const {\n    uri,\n    href,\n    name,\n  } = playlistData;\n\n  const images = digestImages(playlistData.images);\n\n  const playlist: Playlist = {\n    uri,\n    href,\n    name,\n    image: images[0],\n  };\n\n  return playlist;\n}\n","import React, { useState, useEffect } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport usePlaylist from 'services/spotify-api/queries/usePlaylist';\nimport Typography from 'components/Typography';\nimport CrossfadeImage from 'components/CrossfadeImage';\n\ninterface StyleProps {\n  hasPlaylist: boolean;\n};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    opacity: props => props.hasPlaylist ? 1 : 0,\n    transition: '0.8s opacity ease',\n  },\n  imageWrap: {\n    width: 80,\n    height: 80,\n    padding: 20,\n  },\n  image: {\n    borderRadius: 2,\n    boxShadow: '4px 4px 20px rgba(0, 0, 0, 0.25)',\n    overflow: 'hidden',\n  },\n  details: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    paddingTop: 20,\n    paddingBottom: 20,\n  },\n  label: {\n    opacity: 0.5,\n  },\n  name: {\n    maxWidth: 'calc(58.59375vh - 80px)',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  },\n});\n\ninterface ContextPlaylistProps {\n  playlistUri: string | null;\n};\n\nconst ContextPlaylist: React.FunctionComponent<ContextPlaylistProps> = (props) => {\n  const { playlistUri } = props;\n  const playlist = usePlaylist(playlistUri);\n  const classes = useStyles({ hasPlaylist: playlist !== null });\n\n  const [playlistName, setPlaylistName] = useState<string>('');\n  const [playlistImage, setPlaylistImage] = useState<string>('');\n\n  useEffect(() => {\n    setPlaylistName(playlist ? playlist.name : '');\n    setPlaylistImage(playlist ? playlist.image.url : '');\n  }, [playlist]);\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.imageWrap}>\n        {playlistImage && <CrossfadeImage imageUrl={playlistImage} className={classes.image} />}\n      </div>\n      <div className={classes.details}>\n        {playlistName && <Typography size={14} component=\"div\" className={classes.label}>Playlist</Typography>}\n        {playlistName && <Typography size={18} weight=\"medium\" className={classes.name} component=\"div\">{playlistName}</Typography>}\n      </div>\n    </div>\n  );\n};\n\nexport default ContextPlaylist;\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Context } from 'types';\nimport { PlayingContext } from 'enums';\nimport CrossfadeImage from 'components/CrossfadeImage';\nimport ContextPlaylist from './ContextPlaylist';\nimport { Typography } from '@material-ui/core';\n\ninterface StyleProps {\n  hasArt: boolean;\n  hasPlaylist: boolean;\n};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    zIndex: 10,\n    color: '#fff',\n  },\n  details: {\n    position: 'absolute',\n    top: 80,\n    left: 50,\n    width: '58.59375vh',\n    height: 'calc(100vh - 160px)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n  },\n  playlist: {\n    height: props => props.hasPlaylist ? 80 : 50,\n    transition: '0.8s height cubic-bezier(.25, .25, 0, 1)',\n    overflow: 'hidden',\n    position: 'relative',\n    zIndex: 10,\n  },\n  art: {\n    width: '58.59375vh',\n    height: '58.59375vh',\n    boxShadow: props => props.hasArt ? '4px 4px 100px #000' : 'none',\n  },\n  title: {\n    display: 'flex',\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\ninterface PlaybackContextProps {\n  title: string | undefined;\n  art: string | undefined;\n  context: Context | null;\n};\n\nconst PlaybackContext: React.FunctionComponent<PlaybackContextProps> = (props) => {\n  const { title, art, context } = props;\n  const hasArt = art !== undefined;\n  const hasPlaylist = context?.type === PlayingContext.Playlist;\n  const classes = useStyles({ hasArt, hasPlaylist });\n\n  const playlistUri = context && hasPlaylist ? context.uri : null;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.details}>\n        <div className={classes.playlist}>\n          {hasPlaylist && <ContextPlaylist playlistUri={playlistUri} />}\n        </div>\n        <div className={classes.art}>\n          <CrossfadeImage imageUrl={art || ''} />\n        </div>\n        <div className={classes.title}>\n          <Typography variant=\"h5\" component=\"div\">\n            {title || ''}\n          </Typography>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PlaybackContext;\n","import { CreateCSSProperties } from \"@material-ui/core/styles/withStyles\";\n\nexport function lineClamp(lines: number): CreateCSSProperties {\n  return {\n    display: '-webkit-box',\n    WebkitLineClamp: lines,\n    WebkitBoxOrient: 'vertical',\n    overflow: 'hidden',\n  };\n};\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Track, Episode, Context } from 'types';\nimport { PlaybackType, PlayingContext } from 'enums';\nimport Typography from 'components/Typography';\nimport { lineClamp } from 'utils/styles';\n\ninterface StyleProps {\n  hasPlaylist: boolean;\n};\n\nconst useStyles = makeStyles<Theme, StyleProps>({\n  root: {\n    position: 'fixed',\n    top: 80,\n    right: 50,\n    width: 'calc(100vw - 58.59375vh - 150px)',\n    height: 'calc(100vh - 160px)',\n    zIndex: 10,\n    display: 'flex',\n    flexDirection: 'column',\n    color: '#fff',\n    paddingBottom: props => props.hasPlaylist ? 80 : 110,\n    transition: '0.8s padding-bottom cubic-bezier(.25, .25, 0, 1)',\n  },\n  details: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1,\n    textAlign: 'center',\n  },\n  name: {\n    ...lineClamp(3),\n  },\n  artist: {\n    opacity: 0.8,\n    marginBottom: 10,\n    ...lineClamp(2),\n  },\n  description: {\n    opacity: 0.8,\n    marginTop: 30,\n    maxWidth: 900,\n    ...lineClamp(4),\n  },\n});\n\ninterface PlaybackItemProps {\n  type: PlaybackType | null;\n  item: Track | Episode | null;\n  context: Context | null;\n};\n\nconst PlaybackItem: React.FunctionComponent<PlaybackItemProps> = (props) => {\n  const { type, item, context } = props;\n  const hasPlaylist = context?.type === PlayingContext.Playlist;\n  const classes = useStyles({ hasPlaylist });\n  const trackArtist = (type === PlaybackType.Track && item) ? (item as Track).artist : null;\n  const episodeDescription = (type === PlaybackType.Episode && item) ? (item as Episode).description : null;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.details}>\n        {trackArtist && (\n          <Typography size={30} component=\"div\" className={classes.artist}>{trackArtist}</Typography>\n        )}\n        <Typography size={40} component=\"div\" className={classes.name}>{item ? item.name : ''}</Typography>\n        {episodeDescription && (\n          <Typography size={24} component=\"div\" className={classes.description}>{episodeDescription}</Typography>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PlaybackItem;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from 'components/Typography';\nimport SpotifyLogo from 'components/SpotifyLogo';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100vw',\n    height: '100vh',\n    backgroundColor: '#000',\n    color: '#fff',\n  },\n  logo: {\n    '& > svg': {\n      width: '15vw',\n      height: '15vw',\n    }\n  },\n  message: {\n    marginTop: 60,\n  },\n});\n\ninterface SpotifyPlaceholderProps {\n  message?: string;\n};\n\nconst SpotifyPlaceholder: React.FunctionComponent<SpotifyPlaceholderProps> = (props) => {\n  const { message } = props;\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <div className={classes.logo}>\n        <SpotifyLogo />\n      </div>\n      {message && (\n        <div className={classes.message}>\n          <Typography size={30} component=\"div\">{message}</Typography>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SpotifyPlaceholder;\n","import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { PlaybackState } from 'enums';\nimport useCurrentlyPlaying from 'services/spotify-api/queries/useCurrentlyPlaying';\nimport setWindowTitle from 'utils/setWindowTitle';\nimport Typography from 'components/Typography';\nimport TopBar from 'components/TopBar';\nimport SpotifyLogo from 'components/SpotifyLogo';\nimport PlaybackUser from 'components/PlaybackUser';\nimport PlaybackBackdrop from 'components/PlaybackBackdrop';\nimport PlaybackBar from 'components/PlaybackBar';\nimport PlaybackContext from 'components/PlaybackContext';\nimport PlaybackItem from 'components/PlaybackItem';\nimport SpotifyPlaceholder from 'components/SpotifyPlaceholder';\n\nconst useStyles = makeStyles({\n  root: {},\n  device: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    flex: 1,\n    paddingLeft: 20,\n    paddingRight: 20,\n  },\n  deviceLabel: {\n    opacity: 0.8,\n    marginBottom: 6,\n  },\n  deviceName: {\n    display: '-webkit-box',\n    WebkitLineClamp: 2,\n    WebkitBoxOrient: 'vertical',\n    overflow: 'hidden',\n  },\n});\n\nconst SpotifyPlayer: React.FunctionComponent = () => {\n  const classes = useStyles();\n  const [playbackActive, setPlaybackActive] = useState<boolean>(false);\n\n  const currentlyPlaying = useCurrentlyPlaying(true, playbackActive ? 1000 : 6000);\n  const { type, playback, track, album, episode, show, context } = currentlyPlaying;\n  const playbackState = playback?.state;\n\n  useEffect(() => {\n    setPlaybackActive(playbackState !== PlaybackState.InActive);\n  }, [playbackState]);\n\n  const itemName = track?.name || episode?.name;\n  const itemArtistOrShow = track?.artist || show?.name;\n  const itemTitle = itemName && itemArtistOrShow ? `${itemName} | ${itemArtistOrShow}` : null;\n  useEffect(() => {\n    setWindowTitle(itemTitle);\n  }, [itemTitle]);\n\n  if (playback?.state === PlaybackState.InActive) {\n    return <SpotifyPlaceholder message=\"Start playing music on one of your Spotify connected devices...\" />;\n  }\n\n  return (\n    <div className={classes.root}>\n      <TopBar\n        logo={<SpotifyLogo />}\n        left={(\n          <div className={classes.device}>\n            {(playback && playback.device) && (\n              <>\n                <Typography size={12} className={classes.deviceLabel} component=\"div\">Playing on:</Typography>\n                <Typography size={14} className={classes.deviceName} component=\"div\" weight=\"medium\">{playback.device.name}</Typography>\n              </>\n            )}\n          </div>\n        )}\n        right={(\n          <PlaybackUser />\n        )}\n      />\n      <PlaybackBackdrop item={album || show} />\n      <PlaybackBar playback={playback} />\n      <PlaybackContext title={album?.name || show?.name} art={album?.image.url || show?.image.url} context={context} />\n      <PlaybackItem type={type} item={track || episode} context={context} />\n    </div>\n  );\n};\n\nexport default SpotifyPlayer;\n","import { useQuery } from 'react-query';\nimport { CurrentlyPlaying } from 'types';\nimport getCurrentlyPlaying from '../resources/player/getCurrentlyPlaying';\nimport digestCurrentlyPlaying from '../utils/digestCurrentlyPlaying';\n\nexport default function useCurrentlyPlaying(polling: boolean = false, refetchInterval: number = 1000): CurrentlyPlaying {\n\n  const response = useQuery(\n    'currentlyPlaying',\n    () => getCurrentlyPlaying(),\n    {\n      enabled: polling,\n      cacheTime: 0,\n      refetchInterval: polling && refetchInterval,\n      refetchIntervalInBackground: false,\n    },\n  );\n\n  const { data } = response;\n\n  return digestCurrentlyPlaying(data);\n}","import React, { useEffect } from 'react';\nimport setWindowTitle from 'utils/setWindowTitle';\nimport useSpotifyAuth from 'services/spotify-auth';\nimport SpotifyPlayer from 'screens/SpotifyPlayer';\n\nconst App: React.FunctionComponent = () => {\n  const spotifyAuthenticated = useSpotifyAuth();\n\n  useEffect(() => {\n    let existingWindowTitle: string | null = null;\n    const handleWindowBlur = (): void => {\n      existingWindowTitle = document.title;\n      setWindowTitle(null);\n    }\n    const handleWindowFocus = (): void => {\n      if (existingWindowTitle) setWindowTitle(existingWindowTitle);\n    }\n    window.addEventListener('blur', handleWindowBlur);\n    window.addEventListener('focus', handleWindowFocus);\n    return () => {\n      window.removeEventListener('blur', handleWindowBlur);\n      window.removeEventListener('focus', handleWindowFocus);\n    }\n  }, []);\n\n  return spotifyAuthenticated ? <SpotifyPlayer /> : null;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  (\n    <Router>\n      <App />\n    </Router>\n  ),\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}